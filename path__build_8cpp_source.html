<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>FreeRCT: path_build.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">FreeRCT
   </div>
   <div id="projectbrief">Build roller coasters, get rich.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">path_build.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="path__build_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* $Id$ */</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * This file is part of FreeRCT.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * FreeRCT is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, version 2.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * FreeRCT is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * See the GNU General Public License for more details. You should have received a copy of the GNU General Public License along with FreeRCT. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="stdafx_8h.html">stdafx.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="path__build_8h.html">path_build.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="map_8h.html">map.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="gamemode_8h.html">gamemode.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="window_8h.html">window.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="math__func_8h.html">math_func.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="path__build_8h.html#a27e5e590cb1ddac2214842a359bda80b">   19</a></span>&#160;<a class="code" href="classPathBuildManager.html">PathBuildManager</a> <a class="code" href="path__build_8cpp.html#a27e5e590cb1ddac2214842a359bda80b">_path_builder</a>; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="path__build_8cpp.html#a244df86c084d295de15c10d817d208e0">   30</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="path__build_8cpp.html#a244df86c084d295de15c10d817d208e0">BuildPathAtTile</a>(<span class="keywordtype">int</span> xpos, <span class="keywordtype">int</span> ypos, <span class="keywordtype">int</span> zpos, <a class="code" href="path_8h.html#ae093c9a96eda0463cdd2501ba83f10c3">PathType</a> path_type, <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> path_spr)</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;{</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        <a class="code" href="classVoxelStack.html">VoxelStack</a> *avs = <a class="code" href="map_8h.html#a072daf482c5a3aaf1d74d62e5dc91bad">_additions</a>.<a class="code" href="classWorldAdditions.html#ad0f776b69f7aa5724fe9b6c9422d18f1">GetModifyStack</a>(xpos, ypos);</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        <a class="code" href="structVoxel.html">Voxel</a> *av = avs-&gt;<a class="code" href="classVoxelStack.html#ae19e5238e09f57f4ea10029e93062d62">GetCreate</a>(zpos, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        av-&gt;<a class="code" href="structVoxel.html#a14a99f78becfc8085e8f4b252e75f7df">SetInstance</a>(<a class="code" href="map_8h.html#ada9f0c1420f66f999469d82ef2262280aa21a61ab17228d4482507c9526547353">SRI_PATH</a>);</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> slope = <a class="code" href="path_8cpp.html#a0ad66bab121db574823457f41b81d843">AddRemovePathEdges</a>(xpos, ypos, zpos, path_spr, <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba9aeba05ca411e9e289f346e9593b9970">EDGE_ALL</a>, <span class="keyword">true</span>, <a class="code" href="sprite__store_8cpp.html#aceecbbda4fed58053329eced561b20fa">_sprite_manager</a>.<a class="code" href="classSpriteManager.html#a4d602ccbc1f1e04f23e5a8f2602953d8">GetPathStatus</a>(path_type));</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        av-&gt;<a class="code" href="structVoxel.html#a2c147c8da9b96b11b93db224b102b4bc">SetInstanceData</a>(<a class="code" href="map_8h.html#a92a3f06818ead4b4e3e0afb33356c869">MakePathInstanceData</a>(slope, path_type));</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        av = avs-&gt;<a class="code" href="classVoxelStack.html#ae19e5238e09f57f4ea10029e93062d62">GetCreate</a>(zpos + 1, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        av-&gt;<a class="code" href="structVoxel.html#ac6a9570002471456b113fe1d78416cef">ClearVoxel</a>();</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        av-&gt;<a class="code" href="structVoxel.html#a14a99f78becfc8085e8f4b252e75f7df">SetInstance</a>(<a class="code" href="map_8h.html#ada9f0c1420f66f999469d82ef2262280aa21a61ab17228d4482507c9526547353">SRI_PATH</a>);</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        av-&gt;<a class="code" href="structVoxel.html#a2c147c8da9b96b11b93db224b102b4bc">SetInstanceData</a>(<a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbda087708a66f83c522faa1a8be2be798e9">PATH_INVALID</a>);</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        <span class="keywordflow">if</span> (path_spr &gt;= <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbdab04a104637f775750f8060270c1237c4">PATH_FLAT_COUNT</a>) { <span class="comment">// For non-flat sprites, add another voxel.</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                av = avs-&gt;<a class="code" href="classVoxelStack.html#ae19e5238e09f57f4ea10029e93062d62">GetCreate</a>(zpos + 2, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                av-&gt;<a class="code" href="structVoxel.html#ac6a9570002471456b113fe1d78416cef">ClearVoxel</a>();</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                av-&gt;<a class="code" href="structVoxel.html#a14a99f78becfc8085e8f4b252e75f7df">SetInstance</a>(<a class="code" href="map_8h.html#ada9f0c1420f66f999469d82ef2262280aa21a61ab17228d4482507c9526547353">SRI_PATH</a>);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                av-&gt;<a class="code" href="structVoxel.html#a2c147c8da9b96b11b93db224b102b4bc">SetInstanceData</a>(<a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbda087708a66f83c522faa1a8be2be798e9">PATH_INVALID</a>);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        }</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <a class="code" href="viewport_8cpp.html#abbf26051c9afe21b15d0b8e361e58757">MarkVoxelDirty</a>(xpos, ypos, zpos);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;}</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="path__build_8cpp.html#ad0718c9b303cb706a99aa76840e98238">   62</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="path__build_8cpp.html#ad0718c9b303cb706a99aa76840e98238">RemovePathAtTile</a>(<span class="keywordtype">int</span> xpos, <span class="keywordtype">int</span> ypos, <span class="keywordtype">int</span> zpos, <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> path_spr)</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;{</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <a class="code" href="classVoxelStack.html">VoxelStack</a> *avs = <a class="code" href="map_8h.html#a072daf482c5a3aaf1d74d62e5dc91bad">_additions</a>.<a class="code" href="classWorldAdditions.html#ad0f776b69f7aa5724fe9b6c9422d18f1">GetModifyStack</a>(xpos, ypos);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <a class="code" href="structVoxel.html">Voxel</a> *av = avs-&gt;<a class="code" href="classVoxelStack.html#ae19e5238e09f57f4ea10029e93062d62">GetCreate</a>(zpos, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                av-&gt;<a class="code" href="structVoxel.html#a14a99f78becfc8085e8f4b252e75f7df">SetInstance</a>(<a class="code" href="map_8h.html#ada9f0c1420f66f999469d82ef2262280ac9a76026403b7122a5b727d52ae64a3a">SRI_FREE</a>);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                av-&gt;<a class="code" href="structVoxel.html#a2c147c8da9b96b11b93db224b102b4bc">SetInstanceData</a>(0);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                <a class="code" href="path_8cpp.html#a0ad66bab121db574823457f41b81d843">AddRemovePathEdges</a>(xpos, ypos, zpos, path_spr, <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba9aeba05ca411e9e289f346e9593b9970">EDGE_ALL</a>, <span class="keyword">true</span>, <a class="code" href="path_8h.html#ab63ae68a86342b2888c58c113d3a255ca5ce0202df5b1569221dffd3aa4d24283">PAS_UNUSED</a>);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                <a class="code" href="viewport_8cpp.html#abbf26051c9afe21b15d0b8e361e58757">MarkVoxelDirty</a>(xpos, ypos, zpos);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                av = avs-&gt;<a class="code" href="classVoxelStack.html#ae19e5238e09f57f4ea10029e93062d62">GetCreate</a>(zpos + 1, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                av-&gt;<a class="code" href="structVoxel.html#a14a99f78becfc8085e8f4b252e75f7df">SetInstance</a>(<a class="code" href="map_8h.html#ada9f0c1420f66f999469d82ef2262280ac9a76026403b7122a5b727d52ae64a3a">SRI_FREE</a>);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                av-&gt;<a class="code" href="structVoxel.html#a2c147c8da9b96b11b93db224b102b4bc">SetInstanceData</a>(0);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                <span class="keywordflow">if</span> (path_spr &gt;= <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbdab04a104637f775750f8060270c1237c4">PATH_FLAT_COUNT</a>) {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                        av = avs-&gt;<a class="code" href="classVoxelStack.html#ae19e5238e09f57f4ea10029e93062d62">GetCreate</a>(zpos + 2, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                        av-&gt;<a class="code" href="structVoxel.html#a14a99f78becfc8085e8f4b252e75f7df">SetInstance</a>(<a class="code" href="map_8h.html#ada9f0c1420f66f999469d82ef2262280ac9a76026403b7122a5b727d52ae64a3a">SRI_FREE</a>);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                        av-&gt;<a class="code" href="structVoxel.html#a2c147c8da9b96b11b93db224b102b4bc">SetInstanceData</a>(0);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;}</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="path__build_8cpp.html#ae7c6d68e033b0ad71ed538f11366c08b">   93</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="path__build_8cpp.html#ae7c6d68e033b0ad71ed538f11366c08b">PathExistsAtBottomEdge</a>(<span class="keywordtype">int</span> xpos, <span class="keywordtype">int</span> ypos, <span class="keywordtype">int</span> zpos, <a class="code" href="group__map__group.html#ga29bb8f9503c34074bad3c762c92ee68b">TileEdge</a> edge)</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;{</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        xpos += <a class="code" href="tile_8h.html#aab8ddb59473b78057c550ca54ac16a5a">_tile_dxy</a>[edge].<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        ypos += <a class="code" href="tile_8h.html#aab8ddb59473b78057c550ca54ac16a5a">_tile_dxy</a>[edge].<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="map_8h.html#ad107e1bcd4b496ccf8b24ca7b68f4f68">IsVoxelstackInsideWorld</a>(xpos, ypos)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keyword">const</span> <a class="code" href="structVoxel.html">Voxel</a> *vx = <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a43447d39f61e5d921cb647e44e139258">GetVoxel</a>(xpos, ypos, zpos);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordflow">if</span> (vx == <span class="keyword">nullptr</span> || !<a class="code" href="map_8h.html#aea346c5b3fab893e717a4d10fd35cca6">HasValidPath</a>(vx)) {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                <span class="comment">/* No path here, check the voxel below. */</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                <span class="keywordflow">if</span> (zpos == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                vx = <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a43447d39f61e5d921cb647e44e139258">GetVoxel</a>(xpos, ypos, zpos - 1);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                <span class="keywordflow">if</span> (vx == <span class="keyword">nullptr</span> || !<a class="code" href="map_8h.html#aea346c5b3fab893e717a4d10fd35cca6">HasValidPath</a>(vx)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                <span class="comment">/* Path must end at the top of the voxel. */</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="map_8h.html#ad44f39a179da4e3289440f17d6cde5b3">GetImplodedPathSlope</a>(vx) == <a class="code" href="path_8cpp.html#a539eb930c1ae3fd8fe49f13158a6bea7">_path_up_from_edge</a>[edge];</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="comment">/* Path must end at the bottom of the voxel. */</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="map_8h.html#ad44f39a179da4e3289440f17d6cde5b3">GetImplodedPathSlope</a>(vx) &lt; <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbdab04a104637f775750f8060270c1237c4">PATH_FLAT_COUNT</a> || <a class="code" href="map_8h.html#ad44f39a179da4e3289440f17d6cde5b3">GetImplodedPathSlope</a>(vx) == <a class="code" href="path_8cpp.html#a25e306a50253b7bcb376da3b8b10b3fc">_path_down_from_edge</a>[edge];</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;}</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="path__build_8cpp.html#acc1f7855216a6d1116274edf0357e010">  122</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="path__build_8cpp.html#acc1f7855216a6d1116274edf0357e010">BuildUpwardPath</a>(<a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> xpos, <a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> ypos, <a class="code" href="stdafx_8h.html#a1b956fe1df85f3c132b21edb4e116458">int8</a> zpos, <a class="code" href="group__map__group.html#ga29bb8f9503c34074bad3c762c92ee68b">TileEdge</a> edge, <a class="code" href="path_8h.html#ae093c9a96eda0463cdd2501ba83f10c3">PathType</a> path_type, <span class="keywordtype">bool</span> test_only)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;{</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="comment">/* xy position should be valid, and allow path building. */</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="map_8h.html#ad107e1bcd4b496ccf8b24ca7b68f4f68">IsVoxelstackInsideWorld</a>(xpos, ypos)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="gamemode_8cpp.html#a92cd69975056286319406dcfc1f55553">_game_mode_mgr</a>.<a class="code" href="classGameModeManager.html#a2dc1b008ba3c9e96c14b98db5ff2e2fe">InPlayMode</a>() &amp;&amp; <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#aa6c9196b8ab77fea05827e90979f6fa2">GetTileOwner</a>(xpos, ypos) != <a class="code" href="map_8h.html#a3eb46b16632a09b0b18530aca51dcfe3a9e25c348e5b9bb47b1357ea1fef3bfc1">OWN_PARK</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="keywordflow">if</span> (zpos &lt; 0 || zpos &gt; <a class="code" href="map_8h.html#a6b4fc37deee61957b08c65de5cabf619">WORLD_Z_SIZE</a> - 3) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Z range should be valid.</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="keyword">const</span> <a class="code" href="classVoxelStack.html">VoxelStack</a> *vs = <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a813f4f0503efc085557fe4359e0ee520">GetStack</a>(xpos, ypos);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keyword">const</span> <a class="code" href="structVoxel.html">Voxel</a> *v = vs-&gt;<a class="code" href="classVoxelStack.html#a9bdf43776cc3c2598a454690ff4ce542">Get</a>(zpos + 1); <span class="comment">// Voxel above the path should be empty.</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordflow">if</span> (v != <span class="keyword">nullptr</span> &amp;&amp; !v-&gt;<a class="code" href="structVoxel.html#a3c0b954b6ea7b4d47dc31a5e3ffdce06">IsEmpty</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        v = vs-&gt;<a class="code" href="classVoxelStack.html#a9bdf43776cc3c2598a454690ff4ce542">Get</a>(zpos + 2); <span class="comment">// 2 voxels higher should also be empty.</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">if</span> (v != <span class="keyword">nullptr</span> &amp;&amp; !v-&gt;<a class="code" href="structVoxel.html#a3c0b954b6ea7b4d47dc31a5e3ffdce06">IsEmpty</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        v = vs-&gt;<a class="code" href="classVoxelStack.html#a9bdf43776cc3c2598a454690ff4ce542">Get</a>(zpos);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordflow">if</span> (v != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structVoxel.html#a78ee7c8c8e8e62d18733aed8c28cba56">GetInstance</a>() != <a class="code" href="map_8h.html#ada9f0c1420f66f999469d82ef2262280ac9a76026403b7122a5b727d52ae64a3a">SRI_FREE</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Voxel should have no other rides.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structVoxel.html#a39b4316f246f89cc83a490c87edd7ac6">GetGroundType</a>() != <a class="code" href="group__map__group.html#ggad15436b50732bd9ef2b6f2efa5f400edaf0ceff8e769df0430417e0704018dfc7">GTP_INVALID</a>) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                        <a class="code" href="group__map__group.html#gaa25639f3980e1fa4c64a58d3a8e4d149">TileSlope</a> slope = <a class="code" href="group__map__group.html#gaad0ec8bccd84a34b836d57ae88daf898">ExpandTileSlope</a>(v-&gt;<a class="code" href="structVoxel.html#adf0e5dcd80753791808eca30dc90879a">GetGroundSlope</a>());</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                        <span class="keywordflow">if</span> ((slope &amp; (<a class="code" href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a64eb675ab6505f4cab2b51475aad7ddb">TSB_STEEP</a> | <a class="code" href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a162a1112fb74ac0cec258c7cc66543aa">TSB_TOP</a>)) == <a class="code" href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a64eb675ab6505f4cab2b51475aad7ddb">TSB_STEEP</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                        <span class="keywordflow">if</span> ((slope &amp; <a class="code" href="tile_8h.html#a3d4233de510c63efe3ef7effd0e61e8f">_corners_at_edge</a>[edge]) != 0) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// A raised corner at &#39;edge&#39;.</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                        <span class="comment">/* No surface, but a foundation suggests a nearby hill.</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">                         * Currently simply deny building here, in the future, consider making a tunnel.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">                         */</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                        <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structVoxel.html#aa827aa42d8c618d7e68a826494e19c7a">GetFoundationType</a>() != <a class="code" href="group__map__group.html#gga17a68962aecf6bf22a97d7e78da6fcfbaa5de6e54f01653b72c99a96aec13d1eb">FDT_INVALID</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="keywordflow">if</span> (!test_only) <a class="code" href="path__build_8cpp.html#a244df86c084d295de15c10d817d208e0">BuildPathAtTile</a>(xpos, ypos, zpos, path_type, <a class="code" href="path_8cpp.html#a539eb930c1ae3fd8fe49f13158a6bea7">_path_up_from_edge</a>[edge]);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;}</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="path__build_8cpp.html#ada755ad2e6f1ac3fe0b4ec8f9732359c">  165</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="path__build_8cpp.html#ada755ad2e6f1ac3fe0b4ec8f9732359c">BuildFlatPath</a>(<a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> xpos, <a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> ypos, <a class="code" href="stdafx_8h.html#a1b956fe1df85f3c132b21edb4e116458">int8</a> zpos, <a class="code" href="path_8h.html#ae093c9a96eda0463cdd2501ba83f10c3">PathType</a> path_type, <span class="keywordtype">bool</span> test_only)</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;{</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="comment">/* xy position should be valid, and allow path building. */</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="map_8h.html#ad107e1bcd4b496ccf8b24ca7b68f4f68">IsVoxelstackInsideWorld</a>(xpos, ypos)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="gamemode_8cpp.html#a92cd69975056286319406dcfc1f55553">_game_mode_mgr</a>.<a class="code" href="classGameModeManager.html#a2dc1b008ba3c9e96c14b98db5ff2e2fe">InPlayMode</a>() &amp;&amp; <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#aa6c9196b8ab77fea05827e90979f6fa2">GetTileOwner</a>(xpos, ypos) != <a class="code" href="map_8h.html#a3eb46b16632a09b0b18530aca51dcfe3a9e25c348e5b9bb47b1357ea1fef3bfc1">OWN_PARK</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordflow">if</span> (zpos &lt; 0 || zpos &gt; <a class="code" href="map_8h.html#a6b4fc37deee61957b08c65de5cabf619">WORLD_Z_SIZE</a> - 2) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Z range should be valid.</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="keyword">const</span> <a class="code" href="classVoxelStack.html">VoxelStack</a> *vs = <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a813f4f0503efc085557fe4359e0ee520">GetStack</a>(xpos, ypos);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keyword">const</span> <a class="code" href="structVoxel.html">Voxel</a> *v = vs-&gt;<a class="code" href="classVoxelStack.html#a9bdf43776cc3c2598a454690ff4ce542">Get</a>(zpos + 1); <span class="comment">// Voxel above the path should be empty.</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keywordflow">if</span> (v != <span class="keyword">nullptr</span> &amp;&amp; !v-&gt;<a class="code" href="structVoxel.html#a3c0b954b6ea7b4d47dc31a5e3ffdce06">IsEmpty</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        v = vs-&gt;<a class="code" href="classVoxelStack.html#a9bdf43776cc3c2598a454690ff4ce542">Get</a>(zpos);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">if</span> (v != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structVoxel.html#a78ee7c8c8e8e62d18733aed8c28cba56">GetInstance</a>() != <a class="code" href="map_8h.html#ada9f0c1420f66f999469d82ef2262280ac9a76026403b7122a5b727d52ae64a3a">SRI_FREE</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Voxel should have no other rides.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structVoxel.html#a39b4316f246f89cc83a490c87edd7ac6">GetGroundType</a>() != <a class="code" href="group__map__group.html#ggad15436b50732bd9ef2b6f2efa5f400edaf0ceff8e769df0430417e0704018dfc7">GTP_INVALID</a>) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                        <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structVoxel.html#adf0e5dcd80753791808eca30dc90879a">GetGroundSlope</a>() &gt;= <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbdab04a104637f775750f8060270c1237c4">PATH_FLAT_COUNT</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Non-flat surface.</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                        <span class="comment">/* No surface, but a foundation suggests a nearby hill.</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">                         * Currently simply deny building here, in the future, consider making a tunnel.</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">                         */</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                        <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structVoxel.html#aa827aa42d8c618d7e68a826494e19c7a">GetFoundationType</a>() != <a class="code" href="group__map__group.html#gga17a68962aecf6bf22a97d7e78da6fcfbaa5de6e54f01653b72c99a96aec13d1eb">FDT_INVALID</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">if</span> (!test_only) <a class="code" href="path__build_8cpp.html#a244df86c084d295de15c10d817d208e0">BuildPathAtTile</a>(xpos, ypos, zpos, path_type, <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbda1874741e017505f2ea18f01dbf62a215">PATH_EMPTY</a>);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;}</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="path__build_8cpp.html#a9f286063b9257b3ddcb9d37ad7252707">  203</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="path__build_8cpp.html#a9f286063b9257b3ddcb9d37ad7252707">BuildDownwardPath</a>(<a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> xpos, <a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> ypos, <a class="code" href="stdafx_8h.html#a1b956fe1df85f3c132b21edb4e116458">int8</a> zpos, <a class="code" href="group__map__group.html#ga29bb8f9503c34074bad3c762c92ee68b">TileEdge</a> edge, <a class="code" href="path_8h.html#ae093c9a96eda0463cdd2501ba83f10c3">PathType</a> path_type, <span class="keywordtype">bool</span> test_only)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;{</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="comment">/* xy position should be valid, and allow path building. */</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="map_8h.html#ad107e1bcd4b496ccf8b24ca7b68f4f68">IsVoxelstackInsideWorld</a>(xpos, ypos)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="gamemode_8cpp.html#a92cd69975056286319406dcfc1f55553">_game_mode_mgr</a>.<a class="code" href="classGameModeManager.html#a2dc1b008ba3c9e96c14b98db5ff2e2fe">InPlayMode</a>() &amp;&amp; <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#aa6c9196b8ab77fea05827e90979f6fa2">GetTileOwner</a>(xpos, ypos) != <a class="code" href="map_8h.html#a3eb46b16632a09b0b18530aca51dcfe3a9e25c348e5b9bb47b1357ea1fef3bfc1">OWN_PARK</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordflow">if</span> (zpos &lt;= 0 || zpos &gt; <a class="code" href="map_8h.html#a6b4fc37deee61957b08c65de5cabf619">WORLD_Z_SIZE</a> - 3) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Z range should be valid.</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keyword">const</span> <a class="code" href="classVoxelStack.html">VoxelStack</a> *vs = <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a813f4f0503efc085557fe4359e0ee520">GetStack</a>(xpos, ypos);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keyword">const</span> <a class="code" href="structVoxel.html">Voxel</a> *v = vs-&gt;<a class="code" href="classVoxelStack.html#a9bdf43776cc3c2598a454690ff4ce542">Get</a>(zpos); <span class="comment">// Voxel above the path should be empty.</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">if</span> (v != <span class="keyword">nullptr</span> &amp;&amp; !v-&gt;<a class="code" href="structVoxel.html#a3c0b954b6ea7b4d47dc31a5e3ffdce06">IsEmpty</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        v = vs-&gt;<a class="code" href="classVoxelStack.html#a9bdf43776cc3c2598a454690ff4ce542">Get</a>(zpos + 1); <span class="comment">// 1 voxel higher should also be empty.</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordflow">if</span> (v != <span class="keyword">nullptr</span> &amp;&amp; !v-&gt;<a class="code" href="structVoxel.html#a3c0b954b6ea7b4d47dc31a5e3ffdce06">IsEmpty</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        v = vs-&gt;<a class="code" href="classVoxelStack.html#a9bdf43776cc3c2598a454690ff4ce542">Get</a>(zpos - 1);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="keywordflow">if</span> (v != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structVoxel.html#a78ee7c8c8e8e62d18733aed8c28cba56">GetInstance</a>() != <a class="code" href="map_8h.html#ada9f0c1420f66f999469d82ef2262280ac9a76026403b7122a5b727d52ae64a3a">SRI_FREE</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Voxel should have no other rides.</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structVoxel.html#a39b4316f246f89cc83a490c87edd7ac6">GetGroundType</a>() != <a class="code" href="group__map__group.html#ggad15436b50732bd9ef2b6f2efa5f400edaf0ceff8e769df0430417e0704018dfc7">GTP_INVALID</a>) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                        <a class="code" href="group__map__group.html#gaa25639f3980e1fa4c64a58d3a8e4d149">TileSlope</a> slope = <a class="code" href="group__map__group.html#gaad0ec8bccd84a34b836d57ae88daf898">ExpandTileSlope</a>(v-&gt;<a class="code" href="structVoxel.html#adf0e5dcd80753791808eca30dc90879a">GetGroundSlope</a>());</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                        <span class="keywordflow">if</span> ((slope &amp; (<a class="code" href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a64eb675ab6505f4cab2b51475aad7ddb">TSB_STEEP</a> | <a class="code" href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a162a1112fb74ac0cec258c7cc66543aa">TSB_TOP</a>)) == <a class="code" href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a64eb675ab6505f4cab2b51475aad7ddb">TSB_STEEP</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                        <span class="keywordflow">if</span> ((slope &amp; <a class="code" href="tile_8h.html#a3d4233de510c63efe3ef7effd0e61e8f">_corners_at_edge</a>[(edge + 2) &amp; 3]) != 0) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// A raised corner at the opposite &#39;edge&#39;.</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                        <span class="comment">/* No surface, but a foundation suggests a nearby hill.</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">                         * Currently simply deny building here, in the future, consider making a tunnel.</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">                         */</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                        <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structVoxel.html#aa827aa42d8c618d7e68a826494e19c7a">GetFoundationType</a>() != <a class="code" href="group__map__group.html#gga17a68962aecf6bf22a97d7e78da6fcfbaa5de6e54f01653b72c99a96aec13d1eb">FDT_INVALID</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">if</span> (!test_only) <a class="code" href="path__build_8cpp.html#a244df86c084d295de15c10d817d208e0">BuildPathAtTile</a>(xpos, ypos, zpos - 1, path_type, <a class="code" href="path_8cpp.html#a25e306a50253b7bcb376da3b8b10b3fc">_path_down_from_edge</a>[edge]);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;}</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="path__build_8cpp.html#ad9dc8f0638d5ab6fbaa97f3ca190ccad">  245</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="path__build_8cpp.html#ad9dc8f0638d5ab6fbaa97f3ca190ccad">RemovePath</a>(<a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> xpos, <a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> ypos, <a class="code" href="stdafx_8h.html#a1b956fe1df85f3c132b21edb4e116458">int8</a> zpos, <span class="keywordtype">bool</span> test_only)</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;{</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="comment">/* xy position should be valid, and allow path building. */</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="map_8h.html#ad107e1bcd4b496ccf8b24ca7b68f4f68">IsVoxelstackInsideWorld</a>(xpos, ypos)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="gamemode_8cpp.html#a92cd69975056286319406dcfc1f55553">_game_mode_mgr</a>.<a class="code" href="classGameModeManager.html#a2dc1b008ba3c9e96c14b98db5ff2e2fe">InPlayMode</a>() &amp;&amp; <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#aa6c9196b8ab77fea05827e90979f6fa2">GetTileOwner</a>(xpos, ypos) != <a class="code" href="map_8h.html#a3eb46b16632a09b0b18530aca51dcfe3a9e25c348e5b9bb47b1357ea1fef3bfc1">OWN_PARK</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordflow">if</span> (zpos &lt;= 0 || zpos &gt; <a class="code" href="map_8h.html#a6b4fc37deee61957b08c65de5cabf619">WORLD_Z_SIZE</a> - 2) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Z range should be valid.</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keyword">const</span> <a class="code" href="classVoxelStack.html">VoxelStack</a> *vs = <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a813f4f0503efc085557fe4359e0ee520">GetStack</a>(xpos, ypos);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keyword">const</span> <a class="code" href="structVoxel.html">Voxel</a> *v = vs-&gt;<a class="code" href="classVoxelStack.html#a9bdf43776cc3c2598a454690ff4ce542">Get</a>(zpos);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keywordflow">if</span> (v == <span class="keyword">nullptr</span> || !<a class="code" href="map_8h.html#aea346c5b3fab893e717a4d10fd35cca6">HasValidPath</a>(v)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbd">PathSprites</a> ps = <a class="code" href="map_8h.html#ad44f39a179da4e3289440f17d6cde5b3">GetImplodedPathSlope</a>(v);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        assert(ps &lt; <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbda63d831a2b9b2591b40703c362b30e2bc">PATH_COUNT</a>);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        v = vs-&gt;<a class="code" href="classVoxelStack.html#a9bdf43776cc3c2598a454690ff4ce542">Get</a>(zpos + 1);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        assert(v-&gt;<a class="code" href="structVoxel.html#a78ee7c8c8e8e62d18733aed8c28cba56">GetInstance</a>() == <a class="code" href="map_8h.html#ada9f0c1420f66f999469d82ef2262280aa21a61ab17228d4482507c9526547353">SRI_PATH</a> &amp;&amp; !<a class="code" href="map_8h.html#aea346c5b3fab893e717a4d10fd35cca6">HasValidPath</a>(v-&gt;<a class="code" href="structVoxel.html#affbc45e0be9940baf856c2ea9377b182">GetInstanceData</a>()));</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keywordflow">if</span> (ps &gt;= <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbdab04a104637f775750f8060270c1237c4">PATH_FLAT_COUNT</a>) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                v = vs-&gt;<a class="code" href="classVoxelStack.html#a9bdf43776cc3c2598a454690ff4ce542">Get</a>(zpos + 2);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                assert(v-&gt;<a class="code" href="structVoxel.html#a78ee7c8c8e8e62d18733aed8c28cba56">GetInstance</a>() == <a class="code" href="map_8h.html#ada9f0c1420f66f999469d82ef2262280aa21a61ab17228d4482507c9526547353">SRI_PATH</a> &amp;&amp; !<a class="code" href="map_8h.html#aea346c5b3fab893e717a4d10fd35cca6">HasValidPath</a>(v-&gt;<a class="code" href="structVoxel.html#affbc45e0be9940baf856c2ea9377b182">GetInstanceData</a>()));</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keywordflow">if</span> (!test_only) <a class="code" href="path__build_8cpp.html#ad0718c9b303cb706a99aa76840e98238">RemovePathAtTile</a>(xpos, ypos, zpos, ps);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="path__build_8cpp.html#a88d678936d17fb1f338bd24a25935523">  278</a></span>&#160;<span class="keyword">static</span> <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="path__build_8cpp.html#a88d678936d17fb1f338bd24a25935523">CanBuildPathFromEdge</a>(<a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> xpos, <a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> ypos, <a class="code" href="stdafx_8h.html#a1b956fe1df85f3c132b21edb4e116458">int8</a> zpos, <a class="code" href="group__map__group.html#ga29bb8f9503c34074bad3c762c92ee68b">TileEdge</a> edge)</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;{</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="map_8h.html#ad107e1bcd4b496ccf8b24ca7b68f4f68">IsVoxelstackInsideWorld</a>(xpos, ypos)) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="keywordflow">if</span> (zpos &lt; 0 || zpos &gt;= <a class="code" href="map_8h.html#a6b4fc37deee61957b08c65de5cabf619">WORLD_Z_SIZE</a> - 1) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="comment">/* If other side of the edge is not on-world or not owned, don&#39;t compute path options. */</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <a class="code" href="structPoint.html">Point16</a> dxy = <a class="code" href="tile_8h.html#aab8ddb59473b78057c550ca54ac16a5a">_tile_dxy</a>[edge];</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="map_8h.html#ad107e1bcd4b496ccf8b24ca7b68f4f68">IsVoxelstackInsideWorld</a>(xpos + dxy.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>, ypos + dxy.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>) ||</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                        (<a class="code" href="gamemode_8cpp.html#a92cd69975056286319406dcfc1f55553">_game_mode_mgr</a>.<a class="code" href="classGameModeManager.html#a2dc1b008ba3c9e96c14b98db5ff2e2fe">InPlayMode</a>() &amp;&amp; <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#aa6c9196b8ab77fea05827e90979f6fa2">GetTileOwner</a>(xpos + dxy.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>, ypos + dxy.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>) != <a class="code" href="map_8h.html#a3eb46b16632a09b0b18530aca51dcfe3a9e25c348e5b9bb47b1357ea1fef3bfc1">OWN_PARK</a>)) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keyword">const</span> <a class="code" href="structVoxel.html">Voxel</a> *v = <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a43447d39f61e5d921cb647e44e139258">GetVoxel</a>(xpos, ypos, zpos);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">if</span> (v != <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="map_8h.html#aea346c5b3fab893e717a4d10fd35cca6">HasValidPath</a>(v)) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbd">PathSprites</a> ps = <a class="code" href="map_8h.html#ad44f39a179da4e3289440f17d6cde5b3">GetImplodedPathSlope</a>(v);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                <span class="keywordflow">if</span> (ps &lt; <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbdab04a104637f775750f8060270c1237c4">PATH_FLAT_COUNT</a>) <span class="keywordflow">return</span> 1 &lt;&lt; <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8ac181b67e97c9b84e3b7e1907875d3b74">TSL_FLAT</a>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                <span class="keywordflow">if</span> (ps == <a class="code" href="path_8cpp.html#a539eb930c1ae3fd8fe49f13158a6bea7">_path_up_from_edge</a>[edge]) <span class="keywordflow">return</span> 1 &lt;&lt; <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a4eb1a75894e59e230a15fe54125d779c">TSL_UP</a>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="keywordflow">if</span> (zpos &gt; 0) {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                v = <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a43447d39f61e5d921cb647e44e139258">GetVoxel</a>(xpos, ypos, zpos - 1);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                <span class="keywordflow">if</span> (v != <span class="keyword">nullptr</span> &amp;&amp;  <a class="code" href="map_8h.html#aea346c5b3fab893e717a4d10fd35cca6">HasValidPath</a>(v) &amp;&amp; <a class="code" href="map_8h.html#ad44f39a179da4e3289440f17d6cde5b3">GetImplodedPathSlope</a>(v) == <a class="code" href="path_8cpp.html#a25e306a50253b7bcb376da3b8b10b3fc">_path_down_from_edge</a>[edge]) <span class="keywordflow">return</span> 1 &lt;&lt; <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a3b570fae374b633396682ca7358f288b">TSL_DOWN</a>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> slopes = 0;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="comment">// XXX Check for already existing paths.</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="path__build_8cpp.html#a9f286063b9257b3ddcb9d37ad7252707">BuildDownwardPath</a>(xpos, ypos, zpos, edge, <a class="code" href="path_8h.html#ae093c9a96eda0463cdd2501ba83f10c3aed81a54dd317f604fe0c9180e8962372">PAT_INVALID</a>, <span class="keyword">true</span>)) slopes |= 1 &lt;&lt; <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a3b570fae374b633396682ca7358f288b">TSL_DOWN</a>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="path__build_8cpp.html#ada755ad2e6f1ac3fe0b4ec8f9732359c">BuildFlatPath</a>(xpos, ypos, zpos, <a class="code" href="path_8h.html#ae093c9a96eda0463cdd2501ba83f10c3aed81a54dd317f604fe0c9180e8962372">PAT_INVALID</a>, <span class="keyword">true</span>)) slopes |= 1 &lt;&lt; <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8ac181b67e97c9b84e3b7e1907875d3b74">TSL_FLAT</a>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="path__build_8cpp.html#acc1f7855216a6d1116274edf0357e010">BuildUpwardPath</a>(xpos, ypos, zpos, edge, <a class="code" href="path_8h.html#ae093c9a96eda0463cdd2501ba83f10c3aed81a54dd317f604fe0c9180e8962372">PAT_INVALID</a>, <span class="keyword">true</span>)) slopes |= 1 &lt;&lt; <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a4eb1a75894e59e230a15fe54125d779c">TSL_UP</a>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordflow">return</span> slopes;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;}</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="path__build_8cpp.html#a1511109f2a08c1b6b44fca63f9d35575">  315</a></span>&#160;<span class="keyword">static</span> <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="path__build_8cpp.html#a1511109f2a08c1b6b44fca63f9d35575">GetPathAttachPoints</a>(<a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> xpos, <a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> ypos, <a class="code" href="stdafx_8h.html#a1b956fe1df85f3c132b21edb4e116458">int8</a> zpos)</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;{</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="map_8h.html#ad107e1bcd4b496ccf8b24ca7b68f4f68">IsVoxelstackInsideWorld</a>(xpos, ypos)) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="keywordflow">if</span> (zpos &gt;= <a class="code" href="map_8h.html#a6b4fc37deee61957b08c65de5cabf619">WORLD_Z_SIZE</a> - 1) <span class="keywordflow">return</span> 0; <span class="comment">// The voxel containing the flat path, and one above it.</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keyword">const</span> <a class="code" href="structVoxel.html">Voxel</a> *v = <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a43447d39f61e5d921cb647e44e139258">GetVoxel</a>(xpos, ypos, zpos);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keywordflow">if</span> (v == <span class="keyword">nullptr</span>) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> edges = 0;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="group__map__group.html#ga29bb8f9503c34074bad3c762c92ee68b">TileEdge</a> edge = <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba9113f1260923c7d73750d0ef8c45b659">EDGE_BEGIN</a>; edge &lt; <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68babd24d9c7b6e650be2bbe82b73f66cdea">EDGE_COUNT</a>; edge++) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> x = xpos + <a class="code" href="tile_8h.html#aab8ddb59473b78057c550ca54ac16a5a">_tile_dxy</a>[edge].<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> y = ypos + <a class="code" href="tile_8h.html#aab8ddb59473b78057c550ca54ac16a5a">_tile_dxy</a>[edge].<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="map_8h.html#ad107e1bcd4b496ccf8b24ca7b68f4f68">IsVoxelstackInsideWorld</a>(x, y)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="map_8h.html#aea346c5b3fab893e717a4d10fd35cca6">HasValidPath</a>(v)) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                        <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbd">PathSprites</a> ps = <a class="code" href="map_8h.html#ad44f39a179da4e3289440f17d6cde5b3">GetImplodedPathSlope</a>(v);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                        <span class="keywordflow">if</span> (ps &lt; <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbdab04a104637f775750f8060270c1237c4">PATH_FLAT_COUNT</a>) {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="path__build_8cpp.html#a88d678936d17fb1f338bd24a25935523">CanBuildPathFromEdge</a>(x, y, zpos, (<a class="code" href="group__map__group.html#ga29bb8f9503c34074bad3c762c92ee68b">TileEdge</a>)((edge + 2) % 4)) != 0) edges |= 1 &lt;&lt; edge;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="path_8cpp.html#a539eb930c1ae3fd8fe49f13158a6bea7">_path_up_from_edge</a>[edge] == ps</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                                                &amp;&amp; <a class="code" href="path__build_8cpp.html#a88d678936d17fb1f338bd24a25935523">CanBuildPathFromEdge</a>(x, y, zpos, (<a class="code" href="group__map__group.html#ga29bb8f9503c34074bad3c762c92ee68b">TileEdge</a>)((edge + 2) % 4)) != 0) edges |= 1 &lt;&lt; edge;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="path_8cpp.html#a25e306a50253b7bcb376da3b8b10b3fc">_path_down_from_edge</a>[edge] == ps</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                                                &amp;&amp; <a class="code" href="path__build_8cpp.html#a88d678936d17fb1f338bd24a25935523">CanBuildPathFromEdge</a>(x, y, zpos + 1, (<a class="code" href="group__map__group.html#ga29bb8f9503c34074bad3c762c92ee68b">TileEdge</a>)((edge + 2) % 4)) != 0) edges |= (1 &lt;&lt; edge) &lt;&lt; 4;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                        }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structVoxel.html#a39b4316f246f89cc83a490c87edd7ac6">GetGroundType</a>() != <a class="code" href="group__map__group.html#ggad15436b50732bd9ef2b6f2efa5f400edaf0ceff8e769df0430417e0704018dfc7">GTP_INVALID</a>) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                        <a class="code" href="group__map__group.html#gaa25639f3980e1fa4c64a58d3a8e4d149">TileSlope</a> ts = <a class="code" href="group__map__group.html#gaad0ec8bccd84a34b836d57ae88daf898">ExpandTileSlope</a>(v-&gt;<a class="code" href="structVoxel.html#adf0e5dcd80753791808eca30dc90879a">GetGroundSlope</a>());</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                        <span class="keywordflow">if</span> ((ts &amp; <a class="code" href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a64eb675ab6505f4cab2b51475aad7ddb">TSB_STEEP</a>) != 0) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                        <span class="keywordflow">if</span> ((ts &amp; <a class="code" href="tile_8h.html#a3d4233de510c63efe3ef7effd0e61e8f">_corners_at_edge</a>[edge]) == 0) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="path__build_8cpp.html#a88d678936d17fb1f338bd24a25935523">CanBuildPathFromEdge</a>(x, y, zpos, (<a class="code" href="group__map__group.html#ga29bb8f9503c34074bad3c762c92ee68b">TileEdge</a>)((edge + 2) % 4)) != 0) edges |= 1 &lt;&lt; edge;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="path__build_8cpp.html#a88d678936d17fb1f338bd24a25935523">CanBuildPathFromEdge</a>(x, y, zpos + 1, (<a class="code" href="group__map__group.html#ga29bb8f9503c34074bad3c762c92ee68b">TileEdge</a>)((edge + 2) % 4)) != 0) edges |= (1 &lt;&lt; edge) &lt;&lt; 4;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                        }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                <span class="comment">/* No path and no ground -&gt; Invalid, do next edge. */</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keywordflow">return</span> edges;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;}</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div>
<div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="classPathBuildManager.html#abc3796d66911f075f4fc7cc5d2e946d8">  357</a></span>&#160;<a class="code" href="classPathBuildManager.html#abc3796d66911f075f4fc7cc5d2e946d8">PathBuildManager::PathBuildManager</a>() : <a class="code" href="classMouseMode.html">MouseMode</a>(<a class="code" href="group__window__group.html#gga58ad3159a8b1f24a1d3497efcd541b69a9603c6f348a9e2e607912f97d6422ffc">WC_PATH_BUILDER</a>, <a class="code" href="group__viewport__group.html#gga1e53aab612718f53f9838d49f13be786a65a6e493817410a7721b36c2fe19defc">MM_PATH_BUILDING</a>)</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;{</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        this-&gt;<a class="code" href="classPathBuildManager.html#a18eb61e44f231153761d42fc8bc9bf50">path_type</a> = <a class="code" href="path_8h.html#ae093c9a96eda0463cdd2501ba83f10c3aed81a54dd317f604fe0c9180e8962372">PAT_INVALID</a>; <span class="comment">// Initialized by the path gui on first opening.</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> = <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22aa9d5999bf03fabfc4ec22bc5e13f839a">PBS_IDLE</a>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        this-&gt;<a class="code" href="classPathBuildManager.html#a01f03c9ce8d0ac2ce60687d8fd7953fa">selected_arrow</a> = <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba2ccac72ccffe9c7e939bed03787d1c96">INVALID_EDGE</a>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        this-&gt;<a class="code" href="classPathBuildManager.html#a904959a3511725563fabd61bdb0b5e81">selected_slope</a> = <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a2a923a4a698029baf0a27bba9a667242">TSL_INVALID</a>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <a class="code" href="map_8h.html#a63a12422f3f3b0720f0a603872b54a02">DisableWorldAdditions</a>();</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;}</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div>
<div class="line"><a name="l00366"></a><span class="lineno"><a class="line" href="classPathBuildManager.html#adced3d8feb2c0017413bdcfed300931c">  366</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classPathBuildManager.html#adced3d8feb2c0017413bdcfed300931c">PathBuildManager::MayActivateMode</a>()</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;{</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;}</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00376"></a><span class="lineno"><a class="line" href="classPathBuildManager.html#ab15ebcdf7d0590edd4a6612029e256ad">  376</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPathBuildManager.html#ab15ebcdf7d0590edd4a6612029e256ad">PathBuildManager::ActivateMode</a>(<span class="keyword">const</span> <a class="code" href="structPoint.html">Point16</a> &amp;pos)</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;{</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        this-&gt;<a class="code" href="classPathBuildManager.html#a01f03c9ce8d0ac2ce60687d8fd7953fa">selected_arrow</a> = <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba2ccac72ccffe9c7e939bed03787d1c96">INVALID_EDGE</a>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        this-&gt;<a class="code" href="classPathBuildManager.html#a904959a3511725563fabd61bdb0b5e81">selected_slope</a> = <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a2a923a4a698029baf0a27bba9a667242">TSL_INVALID</a>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> != <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22aa9d5999bf03fabfc4ec22bc5e13f839a">PBS_IDLE</a>) this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> = <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22ab9aa50937a37374519754f7e53accd0c">PBS_WAIT_VOXEL</a>;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        this-&gt;<a class="code" href="classPathBuildManager.html#a84e4d6aea7da83768a8f9ae4f3d7be63">UpdateState</a>();</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        this-&gt;<a class="code" href="classPathBuildManager.html#afa98e8ee57b97574a242071c5e512df3">mouse_state</a> = 0;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;}</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno"><a class="line" href="classPathBuildManager.html#ad78e50a83135db0c1cf123735755baa4">  387</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPathBuildManager.html#ad78e50a83135db0c1cf123735755baa4">PathBuildManager::LeaveMode</a>()</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;{</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <a class="code" href="map_8h.html#a63a12422f3f3b0720f0a603872b54a02">DisableWorldAdditions</a>();</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;}</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno"><a class="line" href="classPathBuildManager.html#a44675b0e08cf9c268dc0cce33c299470">  392</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classPathBuildManager.html#a44675b0e08cf9c268dc0cce33c299470">PathBuildManager::EnableCursors</a>()</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;{</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;}</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00397"></a><span class="lineno"><a class="line" href="classPathBuildManager.html#a782d636cc1ebe6b084c9f3c5fee90163">  397</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPathBuildManager.html#a782d636cc1ebe6b084c9f3c5fee90163">PathBuildManager::OnMouseMoveEvent</a>(<a class="code" href="classViewport.html">Viewport</a> *vp, <span class="keyword">const</span> <a class="code" href="structPoint.html">Point16</a> &amp;old_pos, <span class="keyword">const</span> <a class="code" href="structPoint.html">Point16</a> &amp;pos)</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;{</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> == <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a60bfba69d68df771f435ebb1f3752350">PBS_LONG_BUILD</a>) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#ac448d90e345460f8f1b13f7dc9562d38">ComputeNewLongPath</a>(vp-&gt;<a class="code" href="classViewport.html#af3a34c6e7eb9ed1452ff1fb911bbd31a">ComputeHorizontalTranslation</a>(vp-&gt;<a class="code" href="classWindow.html#a28e5baa158219bb8485764c99239d211">rect</a>.<a class="code" href="structRectangle.html#a82ad3c804a2bdb269926f29a2574c22b">width</a> / 2 - pos.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>, vp-&gt;<a class="code" href="classWindow.html#a28e5baa158219bb8485764c99239d211">rect</a>.<a class="code" href="structRectangle.html#aa81e161d1fdaa8801d202f59b4d541e0">height</a> / 2 - pos.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>));</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classPathBuildManager.html#afa98e8ee57b97574a242071c5e512df3">mouse_state</a> &amp; <a class="code" href="group__window__group.html#ggade7253f2c8330e54217bfab0f26c09e0aa432234373ebc9cad22c35420873b1ec">MB_RIGHT</a>) != 0) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                <span class="comment">/* Drag the window if button is pressed down. */</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                vp-&gt;<a class="code" href="classViewport.html#aba252f1b77ad16f08f7d828de99c16b1">MoveViewport</a>(pos.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> - old_pos.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>, pos.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> - old_pos.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                <span class="comment">/* Only update tile cursor if no tile selected yet. */</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> == <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22ab9aa50937a37374519754f7e53accd0c">PBS_WAIT_VOXEL</a>) {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                        <a class="code" href="classFinderData.html">FinderData</a> fdata((<a class="code" href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25a5b37d82d058ce4aa5041817e0eced64f">CS_GROUND</a> | <a class="code" href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25abcab872146b299b3b600a3d351555f08">CS_PATH</a>), <a class="code" href="viewport_8h.html#ac72850d8ae4e0c914f4227f845921a3fad24e8cba4715caaeff18503ab60b8da9">FW_TILE</a>);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                        <span class="keywordflow">if</span> (vp-&gt;<a class="code" href="classViewport.html#ac2f43f9ca5af54296d614f1891597c0a">ComputeCursorPosition</a>(&amp;fdata) != <a class="code" href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25ad9f72db2c1d806e711ad1b28d8e54525">CS_NONE</a>) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                                vp-&gt;<a class="code" href="classViewport.html#ae7e716461b7573afdde9171b2303ce15">tile_cursor</a>.<a class="code" href="classCursor.html#acc304b94b0da4e8a9aa3228f9ad763ef">SetCursor</a>(fdata.<a class="code" href="classFinderData.html#a674e06effe0b2acbf5544b2f3e03dc51">xvoxel</a>, fdata.<a class="code" href="classFinderData.html#a0058064a7d21263f086d94d3ab80c92c">yvoxel</a>, fdata.<a class="code" href="classFinderData.html#a336773fc5b4847f5b0f47710ffd61885">zvoxel</a>, fdata.<a class="code" href="classFinderData.html#ad42b1b2e05e45729a9a506ed49f40e36">cursor</a>);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                        }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                }</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;}</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno"><a class="line" href="classPathBuildManager.html#a1400d7e4959491334e1db90d2291600a">  415</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPathBuildManager.html#a1400d7e4959491334e1db90d2291600a">PathBuildManager::OnMouseButtonEvent</a>(<a class="code" href="classViewport.html">Viewport</a> *vp, <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> state)</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;{</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        this-&gt;<a class="code" href="classPathBuildManager.html#afa98e8ee57b97574a242071c5e512df3">mouse_state</a> = state &amp; <a class="code" href="group__window__group.html#ggade7253f2c8330e54217bfab0f26c09e0a8cbfa61d45819b21829c12c4f92acdf4">MB_CURRENT</a>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classPathBuildManager.html#afa98e8ee57b97574a242071c5e512df3">mouse_state</a> &amp; <a class="code" href="group__window__group.html#ggade7253f2c8330e54217bfab0f26c09e0a439f75eb5eae5c3eb4d3aa51128e61dd">MB_LEFT</a>) != 0) { <span class="comment">// Left-click -&gt; select current tile.</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                <span class="keywordflow">if</span> (this-&gt;state == <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a60bfba69d68df771f435ebb1f3752350">PBS_LONG_BUILD</a> || this-&gt;state == <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22acf27848dfaa6c0ad0ec97a101672ccb7">PBS_LONG_BUY</a>) {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#ae93e0fb129d0f317527ee72f38707f2e">ConfirmLongPath</a>();</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                        <a class="code" href="classFinderData.html">FinderData</a> fdata((<a class="code" href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25a5b37d82d058ce4aa5041817e0eced64f">CS_GROUND</a> | <a class="code" href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25abcab872146b299b3b600a3d351555f08">CS_PATH</a>), <a class="code" href="viewport_8h.html#ac72850d8ae4e0c914f4227f845921a3fad24e8cba4715caaeff18503ab60b8da9">FW_TILE</a>);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                        <span class="keywordflow">if</span> (vp-&gt;<a class="code" href="classViewport.html#ac2f43f9ca5af54296d614f1891597c0a">ComputeCursorPosition</a>(&amp;fdata) != <a class="code" href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25ad9f72db2c1d806e711ad1b28d8e54525">CS_NONE</a>) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                                this-&gt;<a class="code" href="classPathBuildManager.html#acba8ee08d6225b94ce7279020cd8b701">TileClicked</a>(fdata.<a class="code" href="classFinderData.html#a674e06effe0b2acbf5544b2f3e03dc51">xvoxel</a>, fdata.<a class="code" href="classFinderData.html#a0058064a7d21263f086d94d3ab80c92c">yvoxel</a>, fdata.<a class="code" href="classFinderData.html#a336773fc5b4847f5b0f47710ffd61885">zvoxel</a>);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                        }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;}</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div>
<div class="line"><a name="l00435"></a><span class="lineno"><a class="line" href="classPathBuildManager.html#a88767e06fdba54323989f9816cc0cb6d">  435</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPathBuildManager.html#a88767e06fdba54323989f9816cc0cb6d">PathBuildManager::SetPathGuiState</a>(<span class="keywordtype">bool</span> opened)</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;{</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> = opened ? <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22ab9aa50937a37374519754f7e53accd0c">PBS_WAIT_VOXEL</a> : <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22aa9d5999bf03fabfc4ec22bc5e13f839a">PBS_IDLE</a>;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        this-&gt;<a class="code" href="classPathBuildManager.html#a84e4d6aea7da83768a8f9ae4f3d7be63">UpdateState</a>();</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <a class="code" href="classViewport.html">Viewport</a> *vp = <a class="code" href="viewport_8cpp.html#a168b8e1038efc200816524bab3092311">GetViewport</a>();</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="keywordflow">if</span> (opened || (vp != <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="viewport_8cpp.html#a5801ceed6ab2a98de5e940a6044e43dd">_mouse_modes</a>.<a class="code" href="classMouseModes.html#ab5d6b997165a7f1b2eebda43d23d38a4">GetMouseMode</a>() == <a class="code" href="group__viewport__group.html#gga1e53aab612718f53f9838d49f13be786a65a6e493817410a7721b36c2fe19defc">MM_PATH_BUILDING</a>)) <a class="code" href="viewport_8cpp.html#a5801ceed6ab2a98de5e940a6044e43dd">_mouse_modes</a>.<a class="code" href="classMouseModes.html#a017410b133ee48dfb89c1e3c89d9b382">SetViewportMousemode</a>();</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;}</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00449"></a><span class="lineno"><a class="line" href="classPathBuildManager.html#acba8ee08d6225b94ce7279020cd8b701">  449</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPathBuildManager.html#acba8ee08d6225b94ce7279020cd8b701">PathBuildManager::TileClicked</a>(<a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> xpos, <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> ypos, <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> zpos)</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;{</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> == <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22aa9d5999bf03fabfc4ec22bc5e13f839a">PBS_IDLE</a> || this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> &gt; <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a6388218d05136f2a84cfbb4a8acf0eac">PBS_WAIT_BUY</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> dirs = <a class="code" href="path__build_8cpp.html#a1511109f2a08c1b6b44fca63f9d35575">GetPathAttachPoints</a>(xpos, ypos, zpos);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="keywordflow">if</span> (dirs == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        this-&gt;xpos = <a class="code" href="classPathBuildManager.html#ad67154be3a0d8a253780d4a1a73640a8">xpos</a>;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        this-&gt;ypos = <a class="code" href="classPathBuildManager.html#a499bc0205c15f8ffcec9a9218cab34bb">ypos</a>;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        this-&gt;zpos = <a class="code" href="classPathBuildManager.html#a313918be373125f1578256b18070abe4">zpos</a>;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        this-&gt;<a class="code" href="classPathBuildManager.html#abc6d1a79dd78b8c01f50f94a0623eb22">allowed_arrows</a> = dirs;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> = <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22ac8fdc2028b02ce632bd6e6ed6d68bb4e">PBS_WAIT_ARROW</a>;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        this-&gt;<a class="code" href="classPathBuildManager.html#a84e4d6aea7da83768a8f9ae4f3d7be63">UpdateState</a>();</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;}</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno"><a class="line" href="classPathBuildManager.html#a86bd70f92b15566b977f3599182a4710">  467</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPathBuildManager.html#a86bd70f92b15566b977f3599182a4710">PathBuildManager::SelectArrow</a>(<a class="code" href="group__map__group.html#ga29bb8f9503c34074bad3c762c92ee68b">TileEdge</a> direction)</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;{</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keywordflow">if</span> (this-&gt;state &lt; PBS_WAIT_ARROW || this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> &gt; <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a6388218d05136f2a84cfbb4a8acf0eac">PBS_WAIT_BUY</a> || direction &gt;= <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba2ccac72ccffe9c7e939bed03787d1c96">INVALID_EDGE</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classPathBuildManager.html#abc6d1a79dd78b8c01f50f94a0623eb22">allowed_arrows</a> &amp; (0x11 &lt;&lt; direction)) == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        this-&gt;<a class="code" href="classPathBuildManager.html#a01f03c9ce8d0ac2ce60687d8fd7953fa">selected_arrow</a> = direction;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> = <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22afd4d154cd6b809b07be349f09202a333">PBS_WAIT_SLOPE</a>;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        this-&gt;<a class="code" href="classPathBuildManager.html#a84e4d6aea7da83768a8f9ae4f3d7be63">UpdateState</a>();</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;}</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div>
<div class="line"><a name="l00480"></a><span class="lineno"><a class="line" href="classPathBuildManager.html#aacbe430edaf7e0bfea826bbe94a4bf46">  480</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPathBuildManager.html#aacbe430edaf7e0bfea826bbe94a4bf46">PathBuildManager::SelectPathType</a>(<a class="code" href="path_8h.html#ae093c9a96eda0463cdd2501ba83f10c3">PathType</a> pt)</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;{</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classPathBuildManager.html#a18eb61e44f231153761d42fc8bc9bf50">path_type</a> == pt) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        this-&gt;<a class="code" href="classPathBuildManager.html#a18eb61e44f231153761d42fc8bc9bf50">path_type</a> = pt;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> &lt; <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a6388218d05136f2a84cfbb4a8acf0eac">PBS_WAIT_BUY</a>) <span class="keywordflow">return</span>; <span class="comment">// Nothing else to update.</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        this-&gt;<a class="code" href="classPathBuildManager.html#a84e4d6aea7da83768a8f9ae4f3d7be63">UpdateState</a>();</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;}</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div>
<div class="line"><a name="l00494"></a><span class="lineno"><a class="line" href="classPathBuildManager.html#a511cacf7d108d5700d4ac00b24d5b5c5">  494</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPathBuildManager.html#a511cacf7d108d5700d4ac00b24d5b5c5">PathBuildManager::MoveCursor</a>(<a class="code" href="group__map__group.html#ga29bb8f9503c34074bad3c762c92ee68b">TileEdge</a> edge, <span class="keywordtype">bool</span> move_up)</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;{</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordflow">if</span> (this-&gt;state &lt;= PBS_WAIT_ARROW || this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> &gt; <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a6388218d05136f2a84cfbb4a8acf0eac">PBS_WAIT_BUY</a> || edge == <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba2ccac72ccffe9c7e939bed03787d1c96">INVALID_EDGE</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <span class="comment">/* Test whether we can move in the indicated direction. */</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <a class="code" href="structPoint.html">Point16</a> dxy = <a class="code" href="tile_8h.html#aab8ddb59473b78057c550ca54ac16a5a">_tile_dxy</a>[edge];</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="keywordflow">if</span> ((dxy.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> &lt; 0 &amp;&amp; this-&gt;xpos == 0) || (dxy.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> &gt; 0 &amp;&amp; this-&gt;xpos == <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a5bc499626f6ca0544683535d36b5917a">GetXSize</a>() - 1)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="keywordflow">if</span> ((dxy.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> &lt; 0 &amp;&amp; this-&gt;ypos == 0) || (dxy.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> &gt; 0 &amp;&amp; this-&gt;<a class="code" href="classPathBuildManager.html#a499bc0205c15f8ffcec9a9218cab34bb">ypos</a> == <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a4b99ca56b6b030033263b1397b2bdc41">GetYSize</a>() - 1)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="gamemode_8cpp.html#a92cd69975056286319406dcfc1f55553">_game_mode_mgr</a>.<a class="code" href="classGameModeManager.html#a2dc1b008ba3c9e96c14b98db5ff2e2fe">InPlayMode</a>() &amp;&amp; <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#aa6c9196b8ab77fea05827e90979f6fa2">GetTileOwner</a>(this-&gt;<a class="code" href="classPathBuildManager.html#ad67154be3a0d8a253780d4a1a73640a8">xpos</a> + dxy.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>, this-&gt;ypos + dxy.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>) != <a class="code" href="map_8h.html#a3eb46b16632a09b0b18530aca51dcfe3a9e25c348e5b9bb47b1357ea1fef3bfc1">OWN_PARK</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="keyword">const</span> <a class="code" href="structVoxel.html">Voxel</a> *v_top, *v_bot;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="keywordflow">if</span> (move_up) {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                <span class="comment">/* Exit of current tile is at the top. */</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                v_top = (this-&gt;<a class="code" href="classPathBuildManager.html#a313918be373125f1578256b18070abe4">zpos</a> &gt; <a class="code" href="map_8h.html#a6b4fc37deee61957b08c65de5cabf619">WORLD_Z_SIZE</a> - 2) ? <span class="keyword">nullptr</span> : <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a43447d39f61e5d921cb647e44e139258">GetVoxel</a>(this-&gt;xpos + dxy.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>, this-&gt;ypos + dxy.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>, this-&gt;zpos + 1);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                v_bot = <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a43447d39f61e5d921cb647e44e139258">GetVoxel</a>(this-&gt;<a class="code" href="classPathBuildManager.html#ad67154be3a0d8a253780d4a1a73640a8">xpos</a> + dxy.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>, this-&gt;ypos + dxy.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>, this-&gt;zpos);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                <span class="comment">/* Exit of current tile is at the bottom. */</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                v_top = <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a43447d39f61e5d921cb647e44e139258">GetVoxel</a>(this-&gt;<a class="code" href="classPathBuildManager.html#ad67154be3a0d8a253780d4a1a73640a8">xpos</a> + dxy.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>, this-&gt;ypos + dxy.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>, this-&gt;zpos);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                v_bot = (this-&gt;<a class="code" href="classPathBuildManager.html#a313918be373125f1578256b18070abe4">zpos</a> == 0) ? <span class="keyword">nullptr</span> : <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a43447d39f61e5d921cb647e44e139258">GetVoxel</a>(this-&gt;xpos + dxy.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>, this-&gt;ypos + dxy.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>, this-&gt;zpos - 1);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        }</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <span class="comment">/* Try to find a voxel with a path. */</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="keywordflow">if</span> (v_top != <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="map_8h.html#aea346c5b3fab893e717a4d10fd35cca6">HasValidPath</a>(v_top)) {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#ad67154be3a0d8a253780d4a1a73640a8">xpos</a> += dxy.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a499bc0205c15f8ffcec9a9218cab34bb">ypos</a> += dxy.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                <span class="keywordflow">if</span> (move_up) this-&gt;<a class="code" href="classPathBuildManager.html#a313918be373125f1578256b18070abe4">zpos</a>++;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> = <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22ac8fdc2028b02ce632bd6e6ed6d68bb4e">PBS_WAIT_ARROW</a>;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a84e4d6aea7da83768a8f9ae4f3d7be63">UpdateState</a>();</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        }</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="keywordflow">if</span> (v_bot != <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="map_8h.html#aea346c5b3fab893e717a4d10fd35cca6">HasValidPath</a>(v_bot)) {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#ad67154be3a0d8a253780d4a1a73640a8">xpos</a> += dxy.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a499bc0205c15f8ffcec9a9218cab34bb">ypos</a> += dxy.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                <span class="keywordflow">if</span> (!move_up) this-&gt;<a class="code" href="classPathBuildManager.html#a313918be373125f1578256b18070abe4">zpos</a>--;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> = <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22ac8fdc2028b02ce632bd6e6ed6d68bb4e">PBS_WAIT_ARROW</a>;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a84e4d6aea7da83768a8f9ae4f3d7be63">UpdateState</a>();</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        }</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <span class="comment">/* Try to find a voxel with surface. */</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="keywordflow">if</span> (v_top != <span class="keyword">nullptr</span> &amp;&amp; v_top-&gt;<a class="code" href="structVoxel.html#a39b4316f246f89cc83a490c87edd7ac6">GetGroundType</a>() != <a class="code" href="group__map__group.html#ggad15436b50732bd9ef2b6f2efa5f400edaf0ceff8e769df0430417e0704018dfc7">GTP_INVALID</a> &amp;&amp; !<a class="code" href="tile_8h.html#a9e972149bbb18515cf3a69ee0d5b80ea">IsImplodedSteepSlope</a>(v_top-&gt;<a class="code" href="structVoxel.html#adf0e5dcd80753791808eca30dc90879a">GetGroundSlope</a>())) {</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#ad67154be3a0d8a253780d4a1a73640a8">xpos</a> += dxy.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a499bc0205c15f8ffcec9a9218cab34bb">ypos</a> += dxy.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                <span class="keywordflow">if</span> (move_up) this-&gt;<a class="code" href="classPathBuildManager.html#a313918be373125f1578256b18070abe4">zpos</a>++;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> = <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22ac8fdc2028b02ce632bd6e6ed6d68bb4e">PBS_WAIT_ARROW</a>;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a84e4d6aea7da83768a8f9ae4f3d7be63">UpdateState</a>();</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">if</span> (v_bot != <span class="keyword">nullptr</span> &amp;&amp; v_bot-&gt;<a class="code" href="structVoxel.html#a39b4316f246f89cc83a490c87edd7ac6">GetGroundType</a>() != <a class="code" href="group__map__group.html#ggad15436b50732bd9ef2b6f2efa5f400edaf0ceff8e769df0430417e0704018dfc7">GTP_INVALID</a> &amp;&amp; !<a class="code" href="tile_8h.html#a9e972149bbb18515cf3a69ee0d5b80ea">IsImplodedSteepSlope</a>(v_bot-&gt;<a class="code" href="structVoxel.html#adf0e5dcd80753791808eca30dc90879a">GetGroundSlope</a>())) {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#ad67154be3a0d8a253780d4a1a73640a8">xpos</a> += dxy.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a499bc0205c15f8ffcec9a9218cab34bb">ypos</a> += dxy.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                <span class="keywordflow">if</span> (!move_up) this-&gt;<a class="code" href="classPathBuildManager.html#a313918be373125f1578256b18070abe4">zpos</a>--;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> = <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22ac8fdc2028b02ce632bd6e6ed6d68bb4e">PBS_WAIT_ARROW</a>;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a84e4d6aea7da83768a8f9ae4f3d7be63">UpdateState</a>();</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        }</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;}</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div>
<div class="line"><a name="l00556"></a><span class="lineno"><a class="line" href="classPathBuildManager.html#a7eda1d774a6b0389718e1c2be9d2ca46">  556</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPathBuildManager.html#a7eda1d774a6b0389718e1c2be9d2ca46">PathBuildManager::SelectMovement</a>(<span class="keywordtype">bool</span> move_forward)</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;{</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="keywordflow">if</span> (this-&gt;state &lt;= PBS_WAIT_ARROW || this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> &gt; <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a6388218d05136f2a84cfbb4a8acf0eac">PBS_WAIT_BUY</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <a class="code" href="group__map__group.html#ga29bb8f9503c34074bad3c762c92ee68b">TileEdge</a> edge = (move_forward) ? this-&gt;<a class="code" href="classPathBuildManager.html#a01f03c9ce8d0ac2ce60687d8fd7953fa">selected_arrow</a> : (<a class="code" href="group__map__group.html#ga29bb8f9503c34074bad3c762c92ee68b">TileEdge</a>)((this-&gt;<a class="code" href="classPathBuildManager.html#a01f03c9ce8d0ac2ce60687d8fd7953fa">selected_arrow</a> + 2) % 4);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <span class="keywordtype">bool</span> move_up;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <span class="keyword">const</span> <a class="code" href="structVoxel.html">Voxel</a> *v = <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a43447d39f61e5d921cb647e44e139258">GetVoxel</a>(this-&gt;<a class="code" href="classPathBuildManager.html#ad67154be3a0d8a253780d4a1a73640a8">xpos</a>, this-&gt;<a class="code" href="classPathBuildManager.html#a499bc0205c15f8ffcec9a9218cab34bb">ypos</a>, this-&gt;<a class="code" href="classPathBuildManager.html#a313918be373125f1578256b18070abe4">zpos</a>);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="keywordflow">if</span> (v == <span class="keyword">nullptr</span>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="map_8h.html#aea346c5b3fab893e717a4d10fd35cca6">HasValidPath</a>(v)) {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                move_up = (<a class="code" href="map_8h.html#ad44f39a179da4e3289440f17d6cde5b3">GetImplodedPathSlope</a>(v) == <a class="code" href="path_8cpp.html#a25e306a50253b7bcb376da3b8b10b3fc">_path_down_from_edge</a>[edge]);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structVoxel.html#a39b4316f246f89cc83a490c87edd7ac6">GetGroundType</a>() != <a class="code" href="group__map__group.html#ggad15436b50732bd9ef2b6f2efa5f400edaf0ceff8e769df0430417e0704018dfc7">GTP_INVALID</a>) {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                <a class="code" href="group__map__group.html#gaa25639f3980e1fa4c64a58d3a8e4d149">TileSlope</a> ts = <a class="code" href="group__map__group.html#gaad0ec8bccd84a34b836d57ae88daf898">ExpandTileSlope</a>(v-&gt;<a class="code" href="structVoxel.html#adf0e5dcd80753791808eca30dc90879a">GetGroundSlope</a>());</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                <span class="keywordflow">if</span> ((ts &amp; <a class="code" href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a64eb675ab6505f4cab2b51475aad7ddb">TSB_STEEP</a>) != 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                move_up = ((ts &amp; <a class="code" href="tile_8h.html#a3d4233de510c63efe3ef7effd0e61e8f">_corners_at_edge</a>[edge]) != 0);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                <span class="keywordflow">return</span>; <span class="comment">// Surface type but no valid ground/path surface.</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        }</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        this-&gt;<a class="code" href="classPathBuildManager.html#a511cacf7d108d5700d4ac00b24d5b5c5">MoveCursor</a>(edge, move_up);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;}</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div>
<div class="line"><a name="l00584"></a><span class="lineno"><a class="line" href="classPathBuildManager.html#a00a51f2cb970348e60736e8d523ab5f0">  584</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPathBuildManager.html#a00a51f2cb970348e60736e8d523ab5f0">PathBuildManager::ComputeArrowCursorPosition</a>(<a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> *xpos, <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> *ypos, <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *zpos)</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;{</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        assert(this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> &gt; <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22ac8fdc2028b02ce632bd6e6ed6d68bb4e">PBS_WAIT_ARROW</a> &amp;&amp; this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> &lt;= <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a6388218d05136f2a84cfbb4a8acf0eac">PBS_WAIT_BUY</a>);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        assert(this-&gt;<a class="code" href="classPathBuildManager.html#a01f03c9ce8d0ac2ce60687d8fd7953fa">selected_arrow</a> != <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba2ccac72ccffe9c7e939bed03787d1c96">INVALID_EDGE</a>);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <a class="code" href="structPoint.html">Point16</a> dxy = <a class="code" href="tile_8h.html#aab8ddb59473b78057c550ca54ac16a5a">_tile_dxy</a>[this-&gt;<a class="code" href="classPathBuildManager.html#a01f03c9ce8d0ac2ce60687d8fd7953fa">selected_arrow</a>];</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        *xpos = this-&gt;xpos + dxy.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        *ypos = this-&gt;ypos + dxy.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> bit = 1 &lt;&lt; this-&gt;<a class="code" href="classPathBuildManager.html#a01f03c9ce8d0ac2ce60687d8fd7953fa">selected_arrow</a>;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        *zpos = this-&gt;<a class="code" href="classPathBuildManager.html#a313918be373125f1578256b18070abe4">zpos</a>;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="keywordflow">if</span> ((bit &amp; this-&gt;<a class="code" href="classPathBuildManager.html#abc6d1a79dd78b8c01f50f94a0623eb22">allowed_arrows</a>) == 0) { <span class="comment">// Build direction is not at the bottom of the voxel.</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                assert(((bit &lt;&lt; 4) &amp;  this-&gt;allowed_arrows) != 0); <span class="comment">// Should be available at the top of the voxel.</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                (*zpos)++;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        }</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="comment">/* Do some paranoia checking. */</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        assert(*xpos &lt; <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a5bc499626f6ca0544683535d36b5917a">GetXSize</a>());</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        assert(*ypos &lt; <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a4b99ca56b6b030033263b1397b2bdc41">GetYSize</a>());</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        assert(*zpos &lt; <a class="code" href="map_8h.html#a6b4fc37deee61957b08c65de5cabf619">WORLD_Z_SIZE</a>);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;}</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div>
<div class="line"><a name="l00607"></a><span class="lineno"><a class="line" href="classPathBuildManager.html#a5e70b4b0a613bbbea7e925c2bb397114">  607</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPathBuildManager.html#a5e70b4b0a613bbbea7e925c2bb397114">PathBuildManager::ComputeWorldAdditions</a>()</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;{</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        assert(this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> == <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a6388218d05136f2a84cfbb4a8acf0eac">PBS_WAIT_BUY</a>); <span class="comment">// It needs selected_arrow and selected_slope.</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        assert(this-&gt;<a class="code" href="classPathBuildManager.html#a904959a3511725563fabd61bdb0b5e81">selected_slope</a> != <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a2a923a4a698029baf0a27bba9a667242">TSL_INVALID</a>);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <span class="keywordflow">if</span> (((1 &lt;&lt; this-&gt;<a class="code" href="classPathBuildManager.html#a904959a3511725563fabd61bdb0b5e81">selected_slope</a>) &amp; this-&gt;<a class="code" href="classPathBuildManager.html#aaa8165d0069112c9f9a3e62c9f04e5b5">allowed_slopes</a>) == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="code" href="classPathBuildManager.html#ad67154be3a0d8a253780d4a1a73640a8">xpos</a>, <a class="code" href="classPathBuildManager.html#a499bc0205c15f8ffcec9a9218cab34bb">ypos</a>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="classPathBuildManager.html#a313918be373125f1578256b18070abe4">zpos</a>;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        this-&gt;<a class="code" href="classPathBuildManager.html#a00a51f2cb970348e60736e8d523ab5f0">ComputeArrowCursorPosition</a>(&amp;xpos, &amp;ypos, &amp;zpos);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <a class="code" href="group__map__group.html#ga29bb8f9503c34074bad3c762c92ee68b">TileEdge</a> edge = (<a class="code" href="group__map__group.html#ga29bb8f9503c34074bad3c762c92ee68b">TileEdge</a>)((this-&gt;<a class="code" href="classPathBuildManager.html#a01f03c9ce8d0ac2ce60687d8fd7953fa">selected_arrow</a> + 2) % 4);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <span class="keywordflow">switch</span> (this-&gt;<a class="code" href="classPathBuildManager.html#a904959a3511725563fabd61bdb0b5e81">selected_slope</a>) {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a3b570fae374b633396682ca7358f288b">TSL_DOWN</a>:</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                        <a class="code" href="path__build_8cpp.html#a9f286063b9257b3ddcb9d37ad7252707">BuildDownwardPath</a>(xpos, ypos, zpos, edge, this-&gt;<a class="code" href="classPathBuildManager.html#a18eb61e44f231153761d42fc8bc9bf50">path_type</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8ac181b67e97c9b84e3b7e1907875d3b74">TSL_FLAT</a>:</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                        <a class="code" href="path__build_8cpp.html#ada755ad2e6f1ac3fe0b4ec8f9732359c">BuildFlatPath</a>(xpos, ypos, zpos, this-&gt;<a class="code" href="classPathBuildManager.html#a18eb61e44f231153761d42fc8bc9bf50">path_type</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a4eb1a75894e59e230a15fe54125d779c">TSL_UP</a>:</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                        <a class="code" href="path__build_8cpp.html#acc1f7855216a6d1116274edf0357e010">BuildUpwardPath</a>(xpos, ypos, zpos, edge, this-&gt;<a class="code" href="classPathBuildManager.html#a18eb61e44f231153761d42fc8bc9bf50">path_type</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                        <a class="code" href="stdafx_8h.html#a6c2edf1e500e498b687567418bf4fef6">NOT_REACHED</a>();</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;}</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div>
<div class="line"><a name="l00637"></a><span class="lineno"><a class="line" href="classPathBuildManager.html#a84e4d6aea7da83768a8f9ae4f3d7be63">  637</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPathBuildManager.html#a84e4d6aea7da83768a8f9ae4f3d7be63">PathBuildManager::UpdateState</a>()</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;{</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <a class="code" href="classViewport.html">Viewport</a> *vp = <a class="code" href="viewport_8cpp.html#a168b8e1038efc200816524bab3092311">GetViewport</a>();</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> == <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22aa9d5999bf03fabfc4ec22bc5e13f839a">PBS_IDLE</a>) {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a01f03c9ce8d0ac2ce60687d8fd7953fa">selected_arrow</a> = <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba2ccac72ccffe9c7e939bed03787d1c96">INVALID_EDGE</a>;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a904959a3511725563fabd61bdb0b5e81">selected_slope</a> = <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a2a923a4a698029baf0a27bba9a667242">TSL_INVALID</a>;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        }</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="comment">/* The tile cursor is controlled by the viewport if waiting for a voxel or earlier. */</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <span class="keywordflow">if</span> (vp != <span class="keyword">nullptr</span> &amp;&amp; this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> &gt; <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22ab9aa50937a37374519754f7e53accd0c">PBS_WAIT_VOXEL</a> &amp;&amp; this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> &lt;= <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a6388218d05136f2a84cfbb4a8acf0eac">PBS_WAIT_BUY</a>) {</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                vp-&gt;<a class="code" href="classViewport.html#ae7e716461b7573afdde9171b2303ce15">tile_cursor</a>.<a class="code" href="classCursor.html#acc304b94b0da4e8a9aa3228f9ad763ef">SetCursor</a>(this-&gt;<a class="code" href="classPathBuildManager.html#ad67154be3a0d8a253780d4a1a73640a8">xpos</a>, this-&gt;<a class="code" href="classPathBuildManager.html#a499bc0205c15f8ffcec9a9218cab34bb">ypos</a>, this-&gt;<a class="code" href="classPathBuildManager.html#a313918be373125f1578256b18070abe4">zpos</a>, <a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae1019b8e1fe16fadce868506261fd753">CUR_TYPE_TILE</a>);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <span class="comment">/* See whether the PBS_WAIT_ARROW state can be left automatically. */</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> == <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22ac8fdc2028b02ce632bd6e6ed6d68bb4e">PBS_WAIT_ARROW</a>) {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#abc6d1a79dd78b8c01f50f94a0623eb22">allowed_arrows</a> = <a class="code" href="path__build_8cpp.html#a1511109f2a08c1b6b44fca63f9d35575">GetPathAttachPoints</a>(this-&gt;<a class="code" href="classPathBuildManager.html#ad67154be3a0d8a253780d4a1a73640a8">xpos</a>, this-&gt;<a class="code" href="classPathBuildManager.html#a499bc0205c15f8ffcec9a9218cab34bb">ypos</a>, this-&gt;<a class="code" href="classPathBuildManager.html#a313918be373125f1578256b18070abe4">zpos</a>);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                <span class="comment">/* If a valid selection has been made, or if only one choice exists, take it. */</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classPathBuildManager.html#a01f03c9ce8d0ac2ce60687d8fd7953fa">selected_arrow</a> != <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba2ccac72ccffe9c7e939bed03787d1c96">INVALID_EDGE</a> &amp;&amp; ((0x11 &lt;&lt; this-&gt;<a class="code" href="classPathBuildManager.html#a01f03c9ce8d0ac2ce60687d8fd7953fa">selected_arrow</a>) &amp; this-&gt;<a class="code" href="classPathBuildManager.html#abc6d1a79dd78b8c01f50f94a0623eb22">allowed_arrows</a>) != 0) {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> = <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22afd4d154cd6b809b07be349f09202a333">PBS_WAIT_SLOPE</a>;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (this-&gt;allowed_arrows == (1 &lt;&lt; <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba91a648042eb156a3d0d9538907ce1242">EDGE_NE</a>) || this-&gt;allowed_arrows == (0x10 &lt;&lt; <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba91a648042eb156a3d0d9538907ce1242">EDGE_NE</a>)) {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a01f03c9ce8d0ac2ce60687d8fd7953fa">selected_arrow</a> = <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba91a648042eb156a3d0d9538907ce1242">EDGE_NE</a>;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> = <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22afd4d154cd6b809b07be349f09202a333">PBS_WAIT_SLOPE</a>;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (this-&gt;allowed_arrows == (1 &lt;&lt; <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba63bdd25665e0a98d96e4cda2147b2135">EDGE_NW</a>) || this-&gt;allowed_arrows == (0x10 &lt;&lt; <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba63bdd25665e0a98d96e4cda2147b2135">EDGE_NW</a>)) {</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a01f03c9ce8d0ac2ce60687d8fd7953fa">selected_arrow</a> = <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba63bdd25665e0a98d96e4cda2147b2135">EDGE_NW</a>;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> = <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22afd4d154cd6b809b07be349f09202a333">PBS_WAIT_SLOPE</a>;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (this-&gt;allowed_arrows == (1 &lt;&lt; <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68bad242fafb31c89544eebffc371fcc07d5">EDGE_SE</a>) || this-&gt;allowed_arrows == (0x10 &lt;&lt; <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68bad242fafb31c89544eebffc371fcc07d5">EDGE_SE</a>)) {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a01f03c9ce8d0ac2ce60687d8fd7953fa">selected_arrow</a> = <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68bad242fafb31c89544eebffc371fcc07d5">EDGE_SE</a>;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> = <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22afd4d154cd6b809b07be349f09202a333">PBS_WAIT_SLOPE</a>;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (this-&gt;allowed_arrows == (1 &lt;&lt; <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68baa49ed1ec0f987e5a1d8a9196ff848658">EDGE_SW</a>) || this-&gt;allowed_arrows == (0x10 &lt;&lt; <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68baa49ed1ec0f987e5a1d8a9196ff848658">EDGE_SW</a>)) {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a01f03c9ce8d0ac2ce60687d8fd7953fa">selected_arrow</a> = <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68baa49ed1ec0f987e5a1d8a9196ff848658">EDGE_SW</a>;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> = <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22afd4d154cd6b809b07be349f09202a333">PBS_WAIT_SLOPE</a>;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                }</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        }</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        <span class="comment">/* Set the arrow cursor. Note that display is controlled later. */</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <span class="keywordflow">if</span> (vp != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> &gt; <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22ac8fdc2028b02ce632bd6e6ed6d68bb4e">PBS_WAIT_ARROW</a> &amp;&amp; this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> &lt;= <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a6388218d05136f2a84cfbb4a8acf0eac">PBS_WAIT_BUY</a>) {</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                        <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> x_arrow, y_arrow;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                        <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> z_arrow;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a00a51f2cb970348e60736e8d523ab5f0">ComputeArrowCursorPosition</a>(&amp;x_arrow, &amp;y_arrow, &amp;z_arrow);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                        vp-&gt;<a class="code" href="classViewport.html#a51aea10995fec2c7d0c2a9b8202e2fdb">arrow_cursor</a>.<a class="code" href="classCursor.html#acc304b94b0da4e8a9aa3228f9ad763ef">SetCursor</a>(x_arrow, y_arrow, z_arrow, (<a class="code" href="group__viewport__group.html#gabbe637356c8cb749a9726f13658031fa">CursorType</a>)(<a class="code" href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faa5e75ae003f5020916655bd0bf0248c4a">CUR_TYPE_ARROW_NE</a> + this-&gt;<a class="code" href="classPathBuildManager.html#a01f03c9ce8d0ac2ce60687d8fd7953fa">selected_arrow</a>));</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                        vp-&gt;<a class="code" href="classViewport.html#a51aea10995fec2c7d0c2a9b8202e2fdb">arrow_cursor</a>.<a class="code" href="classBaseCursor.html#a322cf4007d148c08716822df27f83fbe">SetInvalid</a>();</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                }</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        }</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <span class="comment">/* See whether the PBS_WAIT_SLOPE state can be left automatically. */</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> == <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22afd4d154cd6b809b07be349f09202a333">PBS_WAIT_SLOPE</a>) {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                <span class="comment">/* Compute allowed slopes. */</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> x_arrow, y_arrow;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> z_arrow;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a00a51f2cb970348e60736e8d523ab5f0">ComputeArrowCursorPosition</a>(&amp;x_arrow, &amp;y_arrow, &amp;z_arrow);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#aaa8165d0069112c9f9a3e62c9f04e5b5">allowed_slopes</a> = <a class="code" href="path__build_8cpp.html#a88d678936d17fb1f338bd24a25935523">CanBuildPathFromEdge</a>(x_arrow, y_arrow, z_arrow, (<a class="code" href="group__map__group.html#ga29bb8f9503c34074bad3c762c92ee68b">TileEdge</a>)((this-&gt;<a class="code" href="classPathBuildManager.html#a01f03c9ce8d0ac2ce60687d8fd7953fa">selected_arrow</a> + 2) % 4));</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                <span class="comment">/* If a valid selection has been made, or if only one choice exists, take it. */</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classPathBuildManager.html#a904959a3511725563fabd61bdb0b5e81">selected_slope</a> != <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a2a923a4a698029baf0a27bba9a667242">TSL_INVALID</a> &amp;&amp; ((1 &lt;&lt; this-&gt;<a class="code" href="classPathBuildManager.html#a904959a3511725563fabd61bdb0b5e81">selected_slope</a>) &amp; this-&gt;<a class="code" href="classPathBuildManager.html#aaa8165d0069112c9f9a3e62c9f04e5b5">allowed_slopes</a>) != 0) {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> = <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a6388218d05136f2a84cfbb4a8acf0eac">PBS_WAIT_BUY</a>;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (this-&gt;allowed_slopes == (1 &lt;&lt; <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a3b570fae374b633396682ca7358f288b">TSL_DOWN</a>)) {</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a904959a3511725563fabd61bdb0b5e81">selected_slope</a> = <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a3b570fae374b633396682ca7358f288b">TSL_DOWN</a>;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> = <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a6388218d05136f2a84cfbb4a8acf0eac">PBS_WAIT_BUY</a>;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (this-&gt;allowed_slopes == (1 &lt;&lt; <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8ac181b67e97c9b84e3b7e1907875d3b74">TSL_FLAT</a>)) {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a904959a3511725563fabd61bdb0b5e81">selected_slope</a> = <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8ac181b67e97c9b84e3b7e1907875d3b74">TSL_FLAT</a>;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> = <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a6388218d05136f2a84cfbb4a8acf0eac">PBS_WAIT_BUY</a>;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (this-&gt;allowed_slopes == (1 &lt;&lt; <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a4eb1a75894e59e230a15fe54125d779c">TSL_UP</a>)) {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a904959a3511725563fabd61bdb0b5e81">selected_slope</a> = <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a4eb1a75894e59e230a15fe54125d779c">TSL_UP</a>;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> = <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a6388218d05136f2a84cfbb4a8acf0eac">PBS_WAIT_BUY</a>;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                }</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        }</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        <span class="comment">/* Handle _additions display. */</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <span class="keywordflow">if</span> (vp != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> == <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22afd4d154cd6b809b07be349f09202a333">PBS_WAIT_SLOPE</a>) {</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                        <a class="code" href="map_8h.html#a072daf482c5a3aaf1d74d62e5dc91bad">_additions</a>.<a class="code" href="classWorldAdditions.html#a75b7c8f73ddd6d0024e2b9a26eda0872">Clear</a>();</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                        vp-&gt;<a class="code" href="classViewport.html#acf62487474e985c772ac2d98dd2e66b9">EnableWorldAdditions</a>();</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> == <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a6388218d05136f2a84cfbb4a8acf0eac">PBS_WAIT_BUY</a>) {</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                        <a class="code" href="map_8h.html#a072daf482c5a3aaf1d74d62e5dc91bad">_additions</a>.<a class="code" href="classWorldAdditions.html#a75b7c8f73ddd6d0024e2b9a26eda0872">Clear</a>();</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a5e70b4b0a613bbbea7e925c2bb397114">ComputeWorldAdditions</a>();</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                        vp-&gt;<a class="code" href="classViewport.html#acf62487474e985c772ac2d98dd2e66b9">EnableWorldAdditions</a>();</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                        vp-&gt;<a class="code" href="classViewport.html#a6587519ef53f480df211762c2d2c8ed6">EnsureAdditionsAreVisible</a>();</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> != <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a60bfba69d68df771f435ebb1f3752350">PBS_LONG_BUILD</a> &amp;&amp; this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> != <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22acf27848dfaa6c0ad0ec97a101672ccb7">PBS_LONG_BUY</a>) vp-&gt;<a class="code" href="classViewport.html#a8f6f78564c1b7397703ce96eb6ea2145">DisableWorldAdditions</a>();</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                }</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        }</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <a class="code" href="window_8cpp.html#a4e83041d9bb7c20fe3f7e8e389b2b416">NotifyChange</a>(<a class="code" href="group__window__group.html#gga58ad3159a8b1f24a1d3497efcd541b69a9603c6f348a9e2e607912f97d6422ffc">WC_PATH_BUILDER</a>, <a class="code" href="window_8h.html#ada744cd8f44581ff7ac7f7eda514779a">ALL_WINDOWS_OF_TYPE</a>, <a class="code" href="window_8h.html#aab6fa040b57445f74c311c245079e741ac1a3ecc0e92154355d370c03f3c0d413">CHG_UPDATE_BUTTONS</a>, 0);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;}</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div>
<div class="line"><a name="l00731"></a><span class="lineno"><a class="line" href="classPathBuildManager.html#a8099ff06509b68e3a09c60eb27a081aa">  731</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classPathBuildManager.html#a8099ff06509b68e3a09c60eb27a081aa">PathBuildManager::GetRemoveIsEnabled</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> == <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22aa9d5999bf03fabfc4ec22bc5e13f839a">PBS_IDLE</a> || this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> == <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22ab9aa50937a37374519754f7e53accd0c">PBS_WAIT_VOXEL</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <span class="comment">/* If current tile has a path, it can be removed. */</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <span class="keyword">const</span> <a class="code" href="structVoxel.html">Voxel</a> *v = <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a43447d39f61e5d921cb647e44e139258">GetVoxel</a>(this-&gt;<a class="code" href="classPathBuildManager.html#ad67154be3a0d8a253780d4a1a73640a8">xpos</a>, this-&gt;<a class="code" href="classPathBuildManager.html#a499bc0205c15f8ffcec9a9218cab34bb">ypos</a>, this-&gt;<a class="code" href="classPathBuildManager.html#a313918be373125f1578256b18070abe4">zpos</a>);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        <span class="keywordflow">if</span> (v != <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="map_8h.html#aea346c5b3fab893e717a4d10fd35cca6">HasValidPath</a>(v)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <span class="keywordflow">return</span> this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> == <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a6388218d05136f2a84cfbb4a8acf0eac">PBS_WAIT_BUY</a>;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;}</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div>
<div class="line"><a name="l00744"></a><span class="lineno"><a class="line" href="classPathBuildManager.html#affeb5c7ab42f0ae20f26472d94aea4b8">  744</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPathBuildManager.html#affeb5c7ab42f0ae20f26472d94aea4b8">PathBuildManager::SelectSlope</a>(<a class="code" href="group__map__group.html#ga3c6755713f12385e83e096c36b8e84e8">TrackSlope</a> slope)</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;{</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <span class="keywordflow">if</span> (this-&gt;state &lt; PBS_WAIT_SLOPE || slope &gt;= <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8af5566302abf09add982a96e739b3c15b">TSL_COUNT_GENTLE</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classPathBuildManager.html#aaa8165d0069112c9f9a3e62c9f04e5b5">allowed_slopes</a> &amp; (1 &lt;&lt; slope)) != 0) {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a904959a3511725563fabd61bdb0b5e81">selected_slope</a> = slope;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> = <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22afd4d154cd6b809b07be349f09202a333">PBS_WAIT_SLOPE</a>;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a84e4d6aea7da83768a8f9ae4f3d7be63">UpdateState</a>();</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        }</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;}</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div>
<div class="line"><a name="l00755"></a><span class="lineno"><a class="line" href="classPathBuildManager.html#a981f5f01bd96e99df6c804230d3790a5">  755</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPathBuildManager.html#a981f5f01bd96e99df6c804230d3790a5">PathBuildManager::SelectLong</a>()</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;{</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> == <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22acf27848dfaa6c0ad0ec97a101672ccb7">PBS_LONG_BUY</a> || this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> == <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a60bfba69d68df771f435ebb1f3752350">PBS_LONG_BUILD</a>) {</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                <span class="comment">/* Disable long mode. */</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> = <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22ac8fdc2028b02ce632bd6e6ed6d68bb4e">PBS_WAIT_ARROW</a>;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a84e4d6aea7da83768a8f9ae4f3d7be63">UpdateState</a>();</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> &lt; <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22ac8fdc2028b02ce632bd6e6ed6d68bb4e">PBS_WAIT_ARROW</a>) {</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                <span class="comment">/* Enable long mode. */</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> = <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a60bfba69d68df771f435ebb1f3752350">PBS_LONG_BUILD</a>;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a2b9e1e703c6e677c585f7b1783e685c0">xlong</a> = <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a5bc499626f6ca0544683535d36b5917a">GetXSize</a>();</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a6e2f9b00f21bf3e5338fac6ad310a6a5">ylong</a> = <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a4b99ca56b6b030033263b1397b2bdc41">GetYSize</a>();</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#abea15235f9ad53553faf1efda14da77e">zlong</a> = <a class="code" href="map_8h.html#a6b4fc37deee61957b08c65de5cabf619">WORLD_Z_SIZE</a>;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a84e4d6aea7da83768a8f9ae4f3d7be63">UpdateState</a>();</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        }</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;}</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div>
<div class="line"><a name="l00780"></a><span class="lineno"><a class="line" href="path__build_8cpp.html#ad85755534d1f8ce55593421bf724a95f">  780</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="path__build_8cpp.html#ad85755534d1f8ce55593421bf724a95f">GoodDirection</a>(<a class="code" href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> change, <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> src, <a class="code" href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> dst) {</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <span class="keywordflow">if</span> (change &gt; 0  &amp;&amp; src &gt;= dst) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <span class="keywordflow">if</span> (change == 0 &amp;&amp; src != dst) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        <span class="keywordflow">if</span> (change &lt; 0  &amp;&amp; src &lt;= dst) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;}</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div>
<div class="line"><a name="l00791"></a><span class="lineno"><a class="line" href="classPathBuildManager.html#ac448d90e345460f8f1b13f7dc9562d38">  791</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPathBuildManager.html#ac448d90e345460f8f1b13f7dc9562d38">PathBuildManager::ComputeNewLongPath</a>(<span class="keyword">const</span> <a class="code" href="structPoint.html">Point32</a> &amp;mousexy)</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;{</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="group__map__group.html#ga3c6755713f12385e83e096c36b8e84e8">TrackSlope</a> slope_prios_down[] = {<a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a3b570fae374b633396682ca7358f288b">TSL_DOWN</a>, <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8ac181b67e97c9b84e3b7e1907875d3b74">TSL_FLAT</a>, <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a4eb1a75894e59e230a15fe54125d779c">TSL_UP</a>,   <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a2a923a4a698029baf0a27bba9a667242">TSL_INVALID</a>}; <span class="comment">// Order of preference when going down.</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="group__map__group.html#ga3c6755713f12385e83e096c36b8e84e8">TrackSlope</a> slope_prios_flat[] = {<a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8ac181b67e97c9b84e3b7e1907875d3b74">TSL_FLAT</a>, <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a4eb1a75894e59e230a15fe54125d779c">TSL_UP</a>,   <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a3b570fae374b633396682ca7358f288b">TSL_DOWN</a>, <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a2a923a4a698029baf0a27bba9a667242">TSL_INVALID</a>}; <span class="comment">// Order of preference when at the right height.</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="group__map__group.html#ga3c6755713f12385e83e096c36b8e84e8">TrackSlope</a> slope_prios_up[]   = {<a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a4eb1a75894e59e230a15fe54125d779c">TSL_UP</a>,   <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8ac181b67e97c9b84e3b7e1907875d3b74">TSL_FLAT</a>, <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a3b570fae374b633396682ca7358f288b">TSL_DOWN</a>, <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a2a923a4a698029baf0a27bba9a667242">TSL_INVALID</a>}; <span class="comment">// Order of preference when going up.</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        <a class="code" href="classViewport.html">Viewport</a> *vp = <a class="code" href="viewport_8cpp.html#a168b8e1038efc200816524bab3092311">GetViewport</a>();</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        <span class="keywordflow">if</span> (vp == <span class="keyword">nullptr</span>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <span class="keywordtype">int</span> c1, c2, c3;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <span class="keywordflow">switch</span> (vp-&gt;<a class="code" href="classViewport.html#adeeab711682948cdfa386bca98734f25">orientation</a>) {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a555bd255b7d0fb03bd8e272ee595b49b">VOR_NORTH</a>: c1 =  1; c2 =  2; c3 =  2; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3ab9f340d6a90130e2bcc75d5be2af447e">VOR_EAST</a>:  c1 = -1; c2 = -2; c3 =  2; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3ae07f82bd43e8d66a7394d5ebf0f47c39">VOR_SOUTH</a>: c1 =  1; c2 = -2; c3 = -2; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a5ff3ccca79a685ddc61d0a8739d73ed1">VOR_WEST</a>:  c1 = -1; c2 =  2; c3 = -2; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                <span class="keywordflow">default</span>: <a class="code" href="stdafx_8h.html#a6c2edf1e500e498b687567418bf4fef6">NOT_REACHED</a>();</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        }</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> vx, vy, vz;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        vy = this-&gt;<a class="code" href="classPathBuildManager.html#a499bc0205c15f8ffcec9a9218cab34bb">ypos</a> * 256 + 128;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> lambda_y = vy - mousexy.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>; <span class="comment">// Distance to constant Y plane at current tile cursor.</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        vx = this-&gt;<a class="code" href="classPathBuildManager.html#ad67154be3a0d8a253780d4a1a73640a8">xpos</a> * 256 + 128;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <a class="code" href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> lambda_x = vx - mousexy.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>; <span class="comment">// Distance to constant X plane at current tile cursor.</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <span class="keywordflow">if</span> (abs(lambda_x) &lt; abs(lambda_y)) {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                <span class="comment">/* X constant. */</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                vx /= 256;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                vy = Clamp&lt;int32&gt;(mousexy.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a> + c1 * lambda_x, 0, <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a4b99ca56b6b030033263b1397b2bdc41">GetYSize</a>() * 256 - 1) / 256;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                vz = Clamp&lt;int32&gt;(vp-&gt;<a class="code" href="classViewport.html#af6e6138999e371db912ad1eaa28817e2">zview</a> + c3 * lambda_x, 0, <a class="code" href="map_8h.html#a6b4fc37deee61957b08c65de5cabf619">WORLD_Z_SIZE</a> * 256 - 1) / 256;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                <span class="comment">/* Y constant. */</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                vx = Clamp&lt;int32&gt;(mousexy.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a> + c1 * lambda_y, 0, <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a5bc499626f6ca0544683535d36b5917a">GetXSize</a>() * 256 - 1) / 256;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                vy /= 256;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                vz = Clamp&lt;int32&gt;(vp-&gt;<a class="code" href="classViewport.html#af6e6138999e371db912ad1eaa28817e2">zview</a> + c2 * lambda_y, 0, <a class="code" href="map_8h.html#a6b4fc37deee61957b08c65de5cabf619">WORLD_Z_SIZE</a> * 256 - 1) / 256;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        }</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classPathBuildManager.html#a2b9e1e703c6e677c585f7b1783e685c0">xlong</a> != vx || this-&gt;<a class="code" href="classPathBuildManager.html#a6e2f9b00f21bf3e5338fac6ad310a6a5">ylong</a> != vy || this-&gt;<a class="code" href="classPathBuildManager.html#abea15235f9ad53553faf1efda14da77e">zlong</a> != vz) {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a2b9e1e703c6e677c585f7b1783e685c0">xlong</a> = vx;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a6e2f9b00f21bf3e5338fac6ad310a6a5">ylong</a> = vy;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#abea15235f9ad53553faf1efda14da77e">zlong</a> = vz;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                <a class="code" href="map_8h.html#a072daf482c5a3aaf1d74d62e5dc91bad">_additions</a>.<a class="code" href="classWorldAdditions.html#a75b7c8f73ddd6d0024e2b9a26eda0872">Clear</a>();</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                vx = this-&gt;<a class="code" href="classPathBuildManager.html#ad67154be3a0d8a253780d4a1a73640a8">xpos</a>;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                vy = this-&gt;<a class="code" href="classPathBuildManager.html#a499bc0205c15f8ffcec9a9218cab34bb">ypos</a>;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                vz = this-&gt;<a class="code" href="classPathBuildManager.html#a313918be373125f1578256b18070abe4">zpos</a>;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                <span class="comment">/* Find the right direction from the selected tile to the current cursor location. */</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                <a class="code" href="group__map__group.html#ga29bb8f9503c34074bad3c762c92ee68b">TileEdge</a> direction;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                <a class="code" href="structPoint.html">Point16</a> dxy;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                <span class="keywordflow">for</span> (direction = <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba9113f1260923c7d73750d0ef8c45b659">EDGE_BEGIN</a>; direction &lt; <a class="code" href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68babd24d9c7b6e650be2bbe82b73f66cdea">EDGE_COUNT</a>; direction++) {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                        dxy = <a class="code" href="tile_8h.html#aab8ddb59473b78057c550ca54ac16a5a">_tile_dxy</a>[direction];</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                        <span class="keywordflow">if</span> (!<a class="code" href="path__build_8cpp.html#ad85755534d1f8ce55593421bf724a95f">GoodDirection</a>(dxy.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>, vx, this-&gt;xlong) || !<a class="code" href="path__build_8cpp.html#ad85755534d1f8ce55593421bf724a95f">GoodDirection</a>(dxy.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>, vy, this-&gt;ylong)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                }</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                <span class="keywordflow">if</span> (direction == EDGE_COUNT) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                <span class="comment">/* &#39;Walk&#39; to the cursor as long as possible. */</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                <span class="keywordflow">while</span> (vx != this-&gt;<a class="code" href="classPathBuildManager.html#a2b9e1e703c6e677c585f7b1783e685c0">xlong</a> || vy != this-&gt;<a class="code" href="classPathBuildManager.html#a6e2f9b00f21bf3e5338fac6ad310a6a5">ylong</a>) {</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                        <a class="code" href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> slopes = <a class="code" href="path__build_8cpp.html#a88d678936d17fb1f338bd24a25935523">CanBuildPathFromEdge</a>(vx, vy, vz, direction);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                        <span class="keyword">const</span> <a class="code" href="group__map__group.html#ga3c6755713f12385e83e096c36b8e84e8">TrackSlope</a> *slope_prio;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                        <span class="comment">/* Get order of slope preference. */</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                        <span class="keywordflow">if</span> (vz &gt; this-&gt;<a class="code" href="classPathBuildManager.html#abea15235f9ad53553faf1efda14da77e">zlong</a>) {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                                slope_prio = slope_prios_down;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (vz == this-&gt;<a class="code" href="classPathBuildManager.html#abea15235f9ad53553faf1efda14da77e">zlong</a>) {</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                                slope_prio = slope_prios_flat;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                                slope_prio = slope_prios_up;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                        }</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                        <span class="comment">/* Find best slope, and take it. */</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                        <span class="keywordflow">while</span> (*slope_prio != <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a2a923a4a698029baf0a27bba9a667242">TSL_INVALID</a> &amp;&amp; (slopes &amp; (1 &lt;&lt; *slope_prio)) == 0) slope_prio++;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                        <span class="keywordflow">if</span> (*slope_prio == <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a2a923a4a698029baf0a27bba9a667242">TSL_INVALID</a>) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                        vx += dxy.<a class="code" href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">x</a>;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                        vy += dxy.<a class="code" href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">y</a>;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                        <span class="keywordflow">if</span> (*slope_prio == <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a4eb1a75894e59e230a15fe54125d779c">TSL_UP</a>) {</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                                <span class="keywordflow">if</span> (!<a class="code" href="path__build_8cpp.html#acc1f7855216a6d1116274edf0357e010">BuildUpwardPath</a>(vx, vy, vz, static_cast&lt;TileEdge&gt;((direction + 2) &amp; 3), this-&gt;<a class="code" href="classPathBuildManager.html#a18eb61e44f231153761d42fc8bc9bf50">path_type</a>, <span class="keyword">false</span>)) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                                vz++;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*slope_prio == <a class="code" href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a3b570fae374b633396682ca7358f288b">TSL_DOWN</a>) {</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                                <span class="keywordflow">if</span> (!<a class="code" href="path__build_8cpp.html#a9f286063b9257b3ddcb9d37ad7252707">BuildDownwardPath</a>(vx, vy, vz, static_cast&lt;TileEdge&gt;((direction + 2) &amp; 3), this-&gt;<a class="code" href="classPathBuildManager.html#a18eb61e44f231153761d42fc8bc9bf50">path_type</a>, <span class="keyword">false</span>)) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                                vz--;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                                <span class="keywordflow">if</span> (!<a class="code" href="path__build_8cpp.html#ada755ad2e6f1ac3fe0b4ec8f9732359c">BuildFlatPath</a>(vx, vy, vz, this-&gt;<a class="code" href="classPathBuildManager.html#a18eb61e44f231153761d42fc8bc9bf50">path_type</a>, <span class="keyword">false</span>)) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                        }</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                }</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                vp-&gt;<a class="code" href="classViewport.html#acf62487474e985c772ac2d98dd2e66b9">EnableWorldAdditions</a>();</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                vp-&gt;<a class="code" href="classViewport.html#a6587519ef53f480df211762c2d2c8ed6">EnsureAdditionsAreVisible</a>();</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        }</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;}</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div>
<div class="line"><a name="l00881"></a><span class="lineno"><a class="line" href="classPathBuildManager.html#ae93e0fb129d0f317527ee72f38707f2e">  881</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPathBuildManager.html#ae93e0fb129d0f317527ee72f38707f2e">PathBuildManager::ConfirmLongPath</a>()</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;{</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> == <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22acf27848dfaa6c0ad0ec97a101672ccb7">PBS_LONG_BUY</a> || this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> != <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a60bfba69d68df771f435ebb1f3752350">PBS_LONG_BUILD</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> = <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22acf27848dfaa6c0ad0ec97a101672ccb7">PBS_LONG_BUY</a>; <span class="comment">// Switch to &#39;buy&#39; mode.</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        this-&gt;<a class="code" href="classPathBuildManager.html#a84e4d6aea7da83768a8f9ae4f3d7be63">UpdateState</a>();</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;}</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div>
<div class="line"><a name="l00892"></a><span class="lineno"><a class="line" href="classPathBuildManager.html#a813e8023b124f8c3f298c0ed414f7078">  892</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPathBuildManager.html#a813e8023b124f8c3f298c0ed414f7078">PathBuildManager::SelectBuyRemove</a>(<span class="keywordtype">bool</span> buying)</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;{</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <span class="keywordflow">if</span> (buying) {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                <span class="comment">// Buy a long path.</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> == <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22acf27848dfaa6c0ad0ec97a101672ccb7">PBS_LONG_BUY</a>) {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                        <a class="code" href="map_8h.html#a072daf482c5a3aaf1d74d62e5dc91bad">_additions</a>.<a class="code" href="classWorldAdditions.html#af9c74f1e4bf6e311c5c9d2e448e8eebd">Commit</a>();</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#ad67154be3a0d8a253780d4a1a73640a8">xpos</a> = this-&gt;<a class="code" href="classPathBuildManager.html#a2b9e1e703c6e677c585f7b1783e685c0">xlong</a>;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a499bc0205c15f8ffcec9a9218cab34bb">ypos</a> = this-&gt;<a class="code" href="classPathBuildManager.html#a6e2f9b00f21bf3e5338fac6ad310a6a5">ylong</a>;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a313918be373125f1578256b18070abe4">zpos</a> = this-&gt;<a class="code" href="classPathBuildManager.html#abea15235f9ad53553faf1efda14da77e">zlong</a>;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> = <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22ac8fdc2028b02ce632bd6e6ed6d68bb4e">PBS_WAIT_ARROW</a>;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a84e4d6aea7da83768a8f9ae4f3d7be63">UpdateState</a>();</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                }</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                <span class="comment">// Buying a path tile.</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> != <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a6388218d05136f2a84cfbb4a8acf0eac">PBS_WAIT_BUY</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                <a class="code" href="map_8h.html#a072daf482c5a3aaf1d74d62e5dc91bad">_additions</a>.<a class="code" href="classWorldAdditions.html#af9c74f1e4bf6e311c5c9d2e448e8eebd">Commit</a>();</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a7eda1d774a6b0389718e1c2be9d2ca46">SelectMovement</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                <span class="comment">// Removing a path tile.</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                <span class="keywordflow">if</span> (this-&gt;state &lt;= PBS_WAIT_VOXEL || this-&gt;<a class="code" href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">state</a> &gt; <a class="code" href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a6388218d05136f2a84cfbb4a8acf0eac">PBS_WAIT_BUY</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                <a class="code" href="group__map__group.html#ga29bb8f9503c34074bad3c762c92ee68b">TileEdge</a> edge = (<a class="code" href="group__map__group.html#ga29bb8f9503c34074bad3c762c92ee68b">TileEdge</a>)((this-&gt;<a class="code" href="classPathBuildManager.html#a01f03c9ce8d0ac2ce60687d8fd7953fa">selected_arrow</a> + 2) % 4);</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                <span class="keyword">const</span> <a class="code" href="structVoxel.html">Voxel</a> *v = <a class="code" href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a>.<a class="code" href="classVoxelWorld.html#a43447d39f61e5d921cb647e44e139258">GetVoxel</a>(this-&gt;<a class="code" href="classPathBuildManager.html#ad67154be3a0d8a253780d4a1a73640a8">xpos</a>, this-&gt;<a class="code" href="classPathBuildManager.html#a499bc0205c15f8ffcec9a9218cab34bb">ypos</a>, this-&gt;<a class="code" href="classPathBuildManager.html#a313918be373125f1578256b18070abe4">zpos</a>);</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                <span class="keywordflow">if</span> (v == <span class="keyword">nullptr</span> || !<a class="code" href="map_8h.html#aea346c5b3fab893e717a4d10fd35cca6">HasValidPath</a>(v)) {</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a511cacf7d108d5700d4ac00b24d5b5c5">MoveCursor</a>(edge, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                        this-&gt;<a class="code" href="classPathBuildManager.html#a84e4d6aea7da83768a8f9ae4f3d7be63">UpdateState</a>();</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                }</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                <a class="code" href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbd">PathSprites</a> ps = <a class="code" href="map_8h.html#ad44f39a179da4e3289440f17d6cde5b3">GetImplodedPathSlope</a>(v);</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                <a class="code" href="map_8h.html#a072daf482c5a3aaf1d74d62e5dc91bad">_additions</a>.<a class="code" href="classWorldAdditions.html#a75b7c8f73ddd6d0024e2b9a26eda0872">Clear</a>();</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="path__build_8cpp.html#ad9dc8f0638d5ab6fbaa97f3ca190ccad">RemovePath</a>(this-&gt;<a class="code" href="classPathBuildManager.html#ad67154be3a0d8a253780d4a1a73640a8">xpos</a>, this-&gt;<a class="code" href="classPathBuildManager.html#a499bc0205c15f8ffcec9a9218cab34bb">ypos</a>, this-&gt;<a class="code" href="classPathBuildManager.html#a313918be373125f1578256b18070abe4">zpos</a>, <span class="keyword">false</span>)) {</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                        <a class="code" href="map_8h.html#a072daf482c5a3aaf1d74d62e5dc91bad">_additions</a>.<a class="code" href="classWorldAdditions.html#af9c74f1e4bf6e311c5c9d2e448e8eebd">Commit</a>();</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                }</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                <span class="comment">/* Short-cut version of this-&gt;SelectMovement(false), as that function fails after removing the path. */</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                <span class="keywordtype">bool</span> move_up = (ps == <a class="code" href="path_8cpp.html#a25e306a50253b7bcb376da3b8b10b3fc">_path_down_from_edge</a>[edge]);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a511cacf7d108d5700d4ac00b24d5b5c5">MoveCursor</a>(edge, move_up);</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                this-&gt;<a class="code" href="classPathBuildManager.html#a84e4d6aea7da83768a8f9ae4f3d7be63">UpdateState</a>();</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        }</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;}</div>
<div class="ttc" id="map_8h_html_aea346c5b3fab893e717a4d10fd35cca6"><div class="ttname"><a href="map_8h.html#aea346c5b3fab893e717a4d10fd35cca6">HasValidPath</a></div><div class="ttdeci">static bool HasValidPath(uint16 instance_data)</div><div class="ttdoc">Does the instance data indicate a valid path (that is, a voxel with an actual path tile)...</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00372">map.h:372</a></div></div>
<div class="ttc" id="classViewport_html_a8f6f78564c1b7397703ce96eb6ea2145"><div class="ttname"><a href="classViewport.html#a8f6f78564c1b7397703ce96eb6ea2145">Viewport::DisableWorldAdditions</a></div><div class="ttdeci">void DisableWorldAdditions()</div><div class="ttdoc">Disable flashing display of showing proposed game world additions to the player. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00403">viewport.cpp:403</a></div></div>
<div class="ttc" id="group__map__group_html_gga29bb8f9503c34074bad3c762c92ee68ba63bdd25665e0a98d96e4cda2147b2135"><div class="ttname"><a href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba63bdd25665e0a98d96e4cda2147b2135">EDGE_NW</a></div><div class="ttdoc">North-west edge. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00122">tile.h:122</a></div></div>
<div class="ttc" id="map_8h_html_ad44f39a179da4e3289440f17d6cde5b3"><div class="ttname"><a href="map_8h.html#ad44f39a179da4e3289440f17d6cde5b3">GetImplodedPathSlope</a></div><div class="ttdeci">static PathSprites GetImplodedPathSlope(uint16 instance_data)</div><div class="ttdoc">Extract the imploded path slope from the instance data. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00394">map.h:394</a></div></div>
<div class="ttc" id="group__window__group_html_ggade7253f2c8330e54217bfab0f26c09e0a439f75eb5eae5c3eb4d3aa51128e61dd"><div class="ttname"><a href="group__window__group.html#ggade7253f2c8330e54217bfab0f26c09e0a439f75eb5eae5c3eb4d3aa51128e61dd">MB_LEFT</a></div><div class="ttdoc">Left button down. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00081">window.h:81</a></div></div>
<div class="ttc" id="math__func_8h_html"><div class="ttname"><a href="math__func_8h.html">math_func.h</a></div><div class="ttdoc">Generic computation functions. </div></div>
<div class="ttc" id="structVoxel_html_adf0e5dcd80753791808eca30dc90879a"><div class="ttname"><a href="structVoxel.html#adf0e5dcd80753791808eca30dc90879a">Voxel::GetGroundSlope</a></div><div class="ttdeci">uint8 GetGroundSlope() const </div><div class="ttdoc">Get the imploded ground slope of a surface voxel. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00215">map.h:215</a></div></div>
<div class="ttc" id="group__window__group_html_ggade7253f2c8330e54217bfab0f26c09e0aa432234373ebc9cad22c35420873b1ec"><div class="ttname"><a href="group__window__group.html#ggade7253f2c8330e54217bfab0f26c09e0aa432234373ebc9cad22c35420873b1ec">MB_RIGHT</a></div><div class="ttdoc">Right button down. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00083">window.h:83</a></div></div>
<div class="ttc" id="gamemode_8cpp_html_a92cd69975056286319406dcfc1f55553"><div class="ttname"><a href="gamemode_8cpp.html#a92cd69975056286319406dcfc1f55553">_game_mode_mgr</a></div><div class="ttdeci">GameModeManager _game_mode_mgr</div><div class="ttdoc">Game mode manager object. </div><div class="ttdef"><b>Definition:</b> <a href="gamemode_8cpp_source.html#l00016">gamemode.cpp:16</a></div></div>
<div class="ttc" id="classViewport_html_af6e6138999e371db912ad1eaa28817e2"><div class="ttname"><a href="classViewport.html#af6e6138999e371db912ad1eaa28817e2">Viewport::zview</a></div><div class="ttdeci">int32 zview</div><div class="ttdoc">Z position of the centre point of the viewport. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00251">viewport.h:251</a></div></div>
<div class="ttc" id="classPathBuildManager_html_a7eda1d774a6b0389718e1c2be9d2ca46"><div class="ttname"><a href="classPathBuildManager.html#a7eda1d774a6b0389718e1c2be9d2ca46">PathBuildManager::SelectMovement</a></div><div class="ttdeci">void SelectMovement(bool move_forward)</div><div class="ttdoc">User clicked &#39;forward&#39; or &#39;back&#39;. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00556">path_build.cpp:556</a></div></div>
<div class="ttc" id="group__viewport__group_html_ggabbe637356c8cb749a9726f13658031faae1019b8e1fe16fadce868506261fd753"><div class="ttname"><a href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faae1019b8e1fe16fadce868506261fd753">CUR_TYPE_TILE</a></div><div class="ttdoc">Show a tile highlight. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00046">viewport.h:46</a></div></div>
<div class="ttc" id="classViewport_html_af3a34c6e7eb9ed1452ff1fb911bbd31a"><div class="ttname"><a href="classViewport.html#af3a34c6e7eb9ed1452ff1fb911bbd31a">Viewport::ComputeHorizontalTranslation</a></div><div class="ttdeci">Point32 ComputeHorizontalTranslation(int dx, int dy)</div><div class="ttdoc">Compute the horizontal translation in world coordinates of the viewing centre to move it dx / dy pixe...</div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01550">viewport.cpp:1550</a></div></div>
<div class="ttc" id="viewport_8cpp_html_abbf26051c9afe21b15d0b8e361e58757"><div class="ttname"><a href="viewport_8cpp.html#abbf26051c9afe21b15d0b8e361e58757">MarkVoxelDirty</a></div><div class="ttdeci">void MarkVoxelDirty(int16 xpos, int16 ypos, int16 zpos, int16 height)</div><div class="ttdoc">Mark a voxel as in need of getting painted. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01716">viewport.cpp:1716</a></div></div>
<div class="ttc" id="path__build_8h_html_ae93e3967177886e33c765ccd77463d22aa9d5999bf03fabfc4ec22bc5e13f839a"><div class="ttname"><a href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22aa9d5999bf03fabfc4ec22bc5e13f839a">PBS_IDLE</a></div><div class="ttdoc">Waiting for the path GUI to be opened. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8h_source.html#l00023">path_build.h:23</a></div></div>
<div class="ttc" id="path__build_8h_html_ae93e3967177886e33c765ccd77463d22a6388218d05136f2a84cfbb4a8acf0eac"><div class="ttname"><a href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a6388218d05136f2a84cfbb4a8acf0eac">PBS_WAIT_BUY</a></div><div class="ttdoc">Path-building has a tile and a slope proposed in _additions, wait for &#39;buy&#39;. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8h_source.html#l00027">path_build.h:27</a></div></div>
<div class="ttc" id="classVoxelWorld_html_a43447d39f61e5d921cb647e44e139258"><div class="ttname"><a href="classVoxelWorld.html#a43447d39f61e5d921cb647e44e139258">VoxelWorld::GetVoxel</a></div><div class="ttdeci">const Voxel * GetVoxel(uint16 x, uint16 y, int16 z) const </div><div class="ttdoc">Get a voxel in the world by voxel coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00520">map.h:520</a></div></div>
<div class="ttc" id="classMouseMode_html"><div class="ttname"><a href="classMouseMode.html">MouseMode</a></div><div class="ttdoc">A single mouse mode. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00274">viewport.h:274</a></div></div>
<div class="ttc" id="window_8h_html"><div class="ttname"><a href="window_8h.html">window.h</a></div><div class="ttdoc">Window handling data structures. </div></div>
<div class="ttc" id="path_8cpp_html_a539eb930c1ae3fd8fe49f13158a6bea7"><div class="ttname"><a href="path_8cpp.html#a539eb930c1ae3fd8fe49f13158a6bea7">_path_up_from_edge</a></div><div class="ttdeci">const PathSprites _path_up_from_edge[EDGE_COUNT]</div><div class="ttdoc">Imploded path tile sprite number to use for an &#39;up&#39; slope from a given edge. </div><div class="ttdef"><b>Definition:</b> <a href="path_8cpp_source.html#l00018">path.cpp:18</a></div></div>
<div class="ttc" id="map_8h_html_a63a12422f3f3b0720f0a603872b54a02"><div class="ttname"><a href="map_8h.html#a63a12422f3f3b0720f0a603872b54a02">DisableWorldAdditions</a></div><div class="ttdeci">void DisableWorldAdditions()</div><div class="ttdoc">Disable flashing display of showing proposed game world additions to the player. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00108">viewport.cpp:108</a></div></div>
<div class="ttc" id="classPathBuildManager_html_a88767e06fdba54323989f9816cc0cb6d"><div class="ttname"><a href="classPathBuildManager.html#a88767e06fdba54323989f9816cc0cb6d">PathBuildManager::SetPathGuiState</a></div><div class="ttdeci">void SetPathGuiState(bool opened)</div><div class="ttdoc">Set the state of the path build GUI. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00435">path_build.cpp:435</a></div></div>
<div class="ttc" id="window_8h_html_ada744cd8f44581ff7ac7f7eda514779a"><div class="ttname"><a href="window_8h.html#ada744cd8f44581ff7ac7f7eda514779a">ALL_WINDOWS_OF_TYPE</a></div><div class="ttdeci">static const WindowNumber ALL_WINDOWS_OF_TYPE</div><div class="ttdoc">Window number parameter meaning &#39;all windows of the window type&#39;. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00112">window.h:112</a></div></div>
<div class="ttc" id="group__map__group_html_ggabad48584a1852521ff578b647f07fdd3a555bd255b7d0fb03bd8e272ee595b49b"><div class="ttname"><a href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a555bd255b7d0fb03bd8e272ee595b49b">VOR_NORTH</a></div><div class="ttdoc">View with top of the world to the north. </div><div class="ttdef"><b>Definition:</b> <a href="orientation_8h_source.html#l00022">orientation.h:22</a></div></div>
<div class="ttc" id="classWorldAdditions_html_ad0f776b69f7aa5724fe9b6c9422d18f1"><div class="ttname"><a href="classWorldAdditions.html#ad0f776b69f7aa5724fe9b6c9422d18f1">WorldAdditions::GetModifyStack</a></div><div class="ttdeci">VoxelStack * GetModifyStack(uint16 x, uint16 y)</div><div class="ttdoc">Get a voxel stack with the purpose of modifying it. </div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00675">map.cpp:675</a></div></div>
<div class="ttc" id="classPathBuildManager_html_a8099ff06509b68e3a09c60eb27a081aa"><div class="ttname"><a href="classPathBuildManager.html#a8099ff06509b68e3a09c60eb27a081aa">PathBuildManager::GetRemoveIsEnabled</a></div><div class="ttdeci">bool GetRemoveIsEnabled() const </div><div class="ttdoc">Can the user press the &#39;remove&#39; button at the path GUI? </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00731">path_build.cpp:731</a></div></div>
<div class="ttc" id="path__build_8h_html_ae93e3967177886e33c765ccd77463d22ab9aa50937a37374519754f7e53accd0c"><div class="ttname"><a href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22ab9aa50937a37374519754f7e53accd0c">PBS_WAIT_VOXEL</a></div><div class="ttdoc">Wait for a voxel to be selected. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8h_source.html#l00024">path_build.h:24</a></div></div>
<div class="ttc" id="path__build_8cpp_html_ad85755534d1f8ce55593421bf724a95f"><div class="ttname"><a href="path__build_8cpp.html#ad85755534d1f8ce55593421bf724a95f">GoodDirection</a></div><div class="ttdeci">static bool GoodDirection(int16 change, uint16 src, uint16 dst)</div><div class="ttdoc">Is the change a good direction to get from src to dst? </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00780">path_build.cpp:780</a></div></div>
<div class="ttc" id="viewport_8h_html_a7eaf31dcf3c53b721a3144bb135f8d25a5b37d82d058ce4aa5041817e0eced64f"><div class="ttname"><a href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25a5b37d82d058ce4aa5041817e0eced64f">CS_GROUND</a></div><div class="ttdoc">Ground sprite. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00064">viewport.h:64</a></div></div>
<div class="ttc" id="classCursor_html_acc304b94b0da4e8a9aa3228f9ad763ef"><div class="ttname"><a href="classCursor.html#acc304b94b0da4e8a9aa3228f9ad763ef">Cursor::SetCursor</a></div><div class="ttdeci">bool SetCursor(uint16 xpos, uint16 ypos, uint8 zpos, CursorType type, bool always=false)</div><div class="ttdoc">Set a cursor. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00539">viewport.cpp:539</a></div></div>
<div class="ttc" id="path__build_8cpp_html_a9f286063b9257b3ddcb9d37ad7252707"><div class="ttname"><a href="path__build_8cpp.html#a9f286063b9257b3ddcb9d37ad7252707">BuildDownwardPath</a></div><div class="ttdeci">static bool BuildDownwardPath(int16 xpos, int16 ypos, int8 zpos, TileEdge edge, PathType path_type, bool test_only)</div><div class="ttdoc">In the given voxel, can an downward path be build in the voxel from the bottom at the given edge...</div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00203">path_build.cpp:203</a></div></div>
<div class="ttc" id="tile_8h_html_a3d4233de510c63efe3ef7effd0e61e8f"><div class="ttname"><a href="tile_8h.html#a3d4233de510c63efe3ef7effd0e61e8f">_corners_at_edge</a></div><div class="ttdeci">const uint8 _corners_at_edge[EDGE_COUNT]</div><div class="ttdoc">Tile corners adjacent to an edge. </div><div class="ttdef"><b>Definition:</b> <a href="tile__func_8cpp_source.html#l00016">tile_func.cpp:16</a></div></div>
<div class="ttc" id="path_8h_html_ae093c9a96eda0463cdd2501ba83f10c3"><div class="ttname"><a href="path_8h.html#ae093c9a96eda0463cdd2501ba83f10c3">PathType</a></div><div class="ttdeci">PathType</div><div class="ttdoc">Available types of paths. </div><div class="ttdef"><b>Definition:</b> <a href="path_8h_source.html#l00104">path.h:104</a></div></div>
<div class="ttc" id="path__build_8cpp_html_a27e5e590cb1ddac2214842a359bda80b"><div class="ttname"><a href="path__build_8cpp.html#a27e5e590cb1ddac2214842a359bda80b">_path_builder</a></div><div class="ttdeci">PathBuildManager _path_builder</div><div class="ttdoc">Path build manager. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00019">path_build.cpp:19</a></div></div>
<div class="ttc" id="path__build_8cpp_html_ad9dc8f0638d5ab6fbaa97f3ca190ccad"><div class="ttname"><a href="path__build_8cpp.html#ad9dc8f0638d5ab6fbaa97f3ca190ccad">RemovePath</a></div><div class="ttdeci">static bool RemovePath(int16 xpos, int16 ypos, int8 zpos, bool test_only)</div><div class="ttdoc">(Try to) remove a path from the given voxel. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00245">path_build.cpp:245</a></div></div>
<div class="ttc" id="classPathBuildManager_html_aacbe430edaf7e0bfea826bbe94a4bf46"><div class="ttname"><a href="classPathBuildManager.html#aacbe430edaf7e0bfea826bbe94a4bf46">PathBuildManager::SelectPathType</a></div><div class="ttdeci">void SelectPathType(PathType pt)</div><div class="ttdoc">A new path type should be used for building paths. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00480">path_build.cpp:480</a></div></div>
<div class="ttc" id="classFinderData_html"><div class="ttname"><a href="classFinderData.html">FinderData</a></div><div class="ttdoc">Data found by Viewport::ComputeCursorPosition. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00108">viewport.h:108</a></div></div>
<div class="ttc" id="group__map__group_html_ga3622a3eda6865ce3e357b761e4f42dbda1874741e017505f2ea18f01dbf62a215"><div class="ttname"><a href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbda1874741e017505f2ea18f01dbf62a215">PATH_EMPTY</a></div><div class="ttdoc">Path without edges or corners. </div><div class="ttdef"><b>Definition:</b> <a href="path_8h_source.html#l00030">path.h:30</a></div></div>
<div class="ttc" id="group__map__group_html_gaad0ec8bccd84a34b836d57ae88daf898"><div class="ttname"><a href="group__map__group.html#gaad0ec8bccd84a34b836d57ae88daf898">ExpandTileSlope</a></div><div class="ttdeci">static TileSlope ExpandTileSlope(uint8 v)</div><div class="ttdoc">Expand a slope sprite number to its bit-encoded form for easier manipulating. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00158">tile.h:158</a></div></div>
<div class="ttc" id="classMouseModes_html_ab5d6b997165a7f1b2eebda43d23d38a4"><div class="ttname"><a href="classMouseModes.html#ab5d6b997165a7f1b2eebda43d23d38a4">MouseModes::GetMouseMode</a></div><div class="ttdeci">ViewportMouseMode GetMouseMode()</div><div class="ttdoc">Get the current mouse mode. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01789">viewport.cpp:1789</a></div></div>
<div class="ttc" id="group__map__group_html_ggad15436b50732bd9ef2b6f2efa5f400edaf0ceff8e769df0430417e0704018dfc7"><div class="ttname"><a href="group__map__group.html#ggad15436b50732bd9ef2b6f2efa5f400edaf0ceff8e769df0430417e0704018dfc7">GTP_INVALID</a></div><div class="ttdoc">Invalid ground type. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00197">tile.h:197</a></div></div>
<div class="ttc" id="path__build_8h_html_ae93e3967177886e33c765ccd77463d22afd4d154cd6b809b07be349f09202a333"><div class="ttname"><a href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22afd4d154cd6b809b07be349f09202a333">PBS_WAIT_SLOPE</a></div><div class="ttdoc">Wait for a slope to be selected. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8h_source.html#l00026">path_build.h:26</a></div></div>
<div class="ttc" id="path__build_8cpp_html_ad0718c9b303cb706a99aa76840e98238"><div class="ttname"><a href="path__build_8cpp.html#ad0718c9b303cb706a99aa76840e98238">RemovePathAtTile</a></div><div class="ttdeci">static void RemovePathAtTile(int xpos, int ypos, int zpos, uint8 path_spr)</div><div class="ttdoc">Remove a path from a tile, and free the voxels above it as well. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00062">path_build.cpp:62</a></div></div>
<div class="ttc" id="classPathBuildManager_html_acba8ee08d6225b94ce7279020cd8b701"><div class="ttname"><a href="classPathBuildManager.html#acba8ee08d6225b94ce7279020cd8b701">PathBuildManager::TileClicked</a></div><div class="ttdeci">void TileClicked(uint16 xpos, uint16 ypos, uint8 zpos)</div><div class="ttdoc">User clicked somewhere. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00449">path_build.cpp:449</a></div></div>
<div class="ttc" id="group__map__group_html_ga3c6755713f12385e83e096c36b8e84e8"><div class="ttname"><a href="group__map__group.html#ga3c6755713f12385e83e096c36b8e84e8">TrackSlope</a></div><div class="ttdeci">TrackSlope</div><div class="ttdoc">Path and track slopes. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00218">tile.h:218</a></div></div>
<div class="ttc" id="structVoxel_html_a2c147c8da9b96b11b93db224b102b4bc"><div class="ttname"><a href="structVoxel.html#a2c147c8da9b96b11b93db224b102b4bc">Voxel::SetInstanceData</a></div><div class="ttdeci">void SetInstanceData(uint16 instance_data)</div><div class="ttdoc">Set the data associated with the ride instance in this voxel. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00114">map.h:114</a></div></div>
<div class="ttc" id="group__map__group_html_gga3c6755713f12385e83e096c36b8e84e8af5566302abf09add982a96e739b3c15b"><div class="ttname"><a href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8af5566302abf09add982a96e739b3c15b">TSL_COUNT_GENTLE</a></div><div class="ttdoc">Number of gentle slopes. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00223">tile.h:223</a></div></div>
<div class="ttc" id="classPathBuildManager_html_a313918be373125f1578256b18070abe4"><div class="ttname"><a href="classPathBuildManager.html#a313918be373125f1578256b18070abe4">PathBuildManager::zpos</a></div><div class="ttdeci">uint8 zpos</div><div class="ttdoc">Z coordinate of the selected voxel. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8h_source.html#l00078">path_build.h:78</a></div></div>
<div class="ttc" id="group__map__group_html_ggaa25639f3980e1fa4c64a58d3a8e4d149a162a1112fb74ac0cec258c7cc66543aa"><div class="ttname"><a href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a162a1112fb74ac0cec258c7cc66543aa">TSB_TOP</a></div><div class="ttdoc">Bit denoting it is the top of a steep slope. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00070">tile.h:70</a></div></div>
<div class="ttc" id="group__map__group_html_ga3622a3eda6865ce3e357b761e4f42dbda087708a66f83c522faa1a8be2be798e9"><div class="ttname"><a href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbda087708a66f83c522faa1a8be2be798e9">PATH_INVALID</a></div><div class="ttdoc">Invalid path. Also used to indicate reserved voxels above paths. </div><div class="ttdef"><b>Definition:</b> <a href="path_8h_source.html#l00085">path.h:85</a></div></div>
<div class="ttc" id="group__map__group_html_ggabad48584a1852521ff578b647f07fdd3a5ff3ccca79a685ddc61d0a8739d73ed1"><div class="ttname"><a href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3a5ff3ccca79a685ddc61d0a8739d73ed1">VOR_WEST</a></div><div class="ttdoc">View with top of the world to the west. </div><div class="ttdef"><b>Definition:</b> <a href="orientation_8h_source.html#l00025">orientation.h:25</a></div></div>
<div class="ttc" id="structVoxel_html_a14a99f78becfc8085e8f4b252e75f7df"><div class="ttname"><a href="structVoxel.html#a14a99f78becfc8085e8f4b252e75f7df">Voxel::SetInstance</a></div><div class="ttdeci">void SetInstance(SmallRideInstance instance)</div><div class="ttdoc">Set the ride instance at this voxel. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00081">map.h:81</a></div></div>
<div class="ttc" id="stdafx_8h_html_a05f6b0ae8f6a6e135b0e290c25fe0e4e"><div class="ttname"><a href="stdafx_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a></div><div class="ttdeci">unsigned short uint16</div><div class="ttdoc">Unsigned 16 bit wide data type. </div><div class="ttdef"><b>Definition:</b> <a href="stdafx_8h_source.html#l00132">stdafx.h:132</a></div></div>
<div class="ttc" id="map_8h_html_a072daf482c5a3aaf1d74d62e5dc91bad"><div class="ttname"><a href="map_8h.html#a072daf482c5a3aaf1d74d62e5dc91bad">_additions</a></div><div class="ttdeci">WorldAdditions _additions</div><div class="ttdoc">Proposed additions to the game world. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00095">viewport.cpp:95</a></div></div>
<div class="ttc" id="group__window__group_html_gga58ad3159a8b1f24a1d3497efcd541b69a9603c6f348a9e2e607912f97d6422ffc"><div class="ttname"><a href="group__window__group.html#gga58ad3159a8b1f24a1d3497efcd541b69a9603c6f348a9e2e607912f97d6422ffc">WC_PATH_BUILDER</a></div><div class="ttdoc">Path build GUI. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00049">window.h:49</a></div></div>
<div class="ttc" id="classPathBuildManager_html_affeb5c7ab42f0ae20f26472d94aea4b8"><div class="ttname"><a href="classPathBuildManager.html#affeb5c7ab42f0ae20f26472d94aea4b8">PathBuildManager::SelectSlope</a></div><div class="ttdeci">void SelectSlope(TrackSlope slope)</div><div class="ttdoc">Select a slope from the allowed slopes. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00744">path_build.cpp:744</a></div></div>
<div class="ttc" id="structRectangle_html_a82ad3c804a2bdb269926f29a2574c22b"><div class="ttname"><a href="structRectangle.html#a82ad3c804a2bdb269926f29a2574c22b">Rectangle::width</a></div><div class="ttdeci">SZ width</div><div class="ttdoc">Width of the rectangle. </div><div class="ttdef"><b>Definition:</b> <a href="geometry_8h_source.html#l00248">geometry.h:248</a></div></div>
<div class="ttc" id="classBaseCursor_html_a322cf4007d148c08716822df27f83fbe"><div class="ttname"><a href="classBaseCursor.html#a322cf4007d148c08716822df27f83fbe">BaseCursor::SetInvalid</a></div><div class="ttdeci">void SetInvalid()</div><div class="ttdoc">Mark the cursor as being invalid, and update the viewport if necessary. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00488">viewport.cpp:488</a></div></div>
<div class="ttc" id="classPathBuildManager_html_ad78e50a83135db0c1cf123735755baa4"><div class="ttname"><a href="classPathBuildManager.html#ad78e50a83135db0c1cf123735755baa4">PathBuildManager::LeaveMode</a></div><div class="ttdeci">void LeaveMode() override</div><div class="ttdoc">Notification that the mouse mode has been disabled. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00387">path_build.cpp:387</a></div></div>
<div class="ttc" id="classViewport_html_adeeab711682948cdfa386bca98734f25"><div class="ttname"><a href="classViewport.html#adeeab711682948cdfa386bca98734f25">Viewport::orientation</a></div><div class="ttdeci">ViewOrientation orientation</div><div class="ttdoc">Direction of view. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00255">viewport.h:255</a></div></div>
<div class="ttc" id="path__build_8cpp_html_a244df86c084d295de15c10d817d208e0"><div class="ttname"><a href="path__build_8cpp.html#a244df86c084d295de15c10d817d208e0">BuildPathAtTile</a></div><div class="ttdeci">static void BuildPathAtTile(int xpos, int ypos, int zpos, PathType path_type, uint8 path_spr)</div><div class="ttdoc">Build a path at a tile, and claim the voxels above it as well. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00030">path_build.cpp:30</a></div></div>
<div class="ttc" id="classPathBuildManager_html_adced3d8feb2c0017413bdcfed300931c"><div class="ttname"><a href="classPathBuildManager.html#adced3d8feb2c0017413bdcfed300931c">PathBuildManager::MayActivateMode</a></div><div class="ttdeci">bool MayActivateMode() override</div><div class="ttdoc">Query the mode whether it can be enabled. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00366">path_build.cpp:366</a></div></div>
<div class="ttc" id="classPathBuildManager_html_afa98e8ee57b97574a242071c5e512df3"><div class="ttname"><a href="classPathBuildManager.html#afa98e8ee57b97574a242071c5e512df3">PathBuildManager::mouse_state</a></div><div class="ttdeci">uint8 mouse_state</div><div class="ttdoc">State of the mouse buttons. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8h_source.html#l00072">path_build.h:72</a></div></div>
<div class="ttc" id="map_8h_html_a92a3f06818ead4b4e3e0afb33356c869"><div class="ttname"><a href="map_8h.html#a92a3f06818ead4b4e3e0afb33356c869">MakePathInstanceData</a></div><div class="ttdeci">static uint16 MakePathInstanceData(uint8 slope, PathType path_type)</div><div class="ttdoc">Construct instance data for a valid path. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00444">map.h:444</a></div></div>
<div class="ttc" id="group__map__group_html_ga3622a3eda6865ce3e357b761e4f42dbda63d831a2b9b2591b40703c362b30e2bc"><div class="ttname"><a href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbda63d831a2b9b2591b40703c362b30e2bc">PATH_COUNT</a></div><div class="ttdoc">Number of path sprites. </div><div class="ttdef"><b>Definition:</b> <a href="path_8h_source.html#l00083">path.h:83</a></div></div>
<div class="ttc" id="stdafx_8h_html_a259fa4834387bd68627ddf37bb3ebdb9"><div class="ttname"><a href="stdafx_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a></div><div class="ttdeci">signed short int16</div><div class="ttdoc">Signed 16 bit wide data type. </div><div class="ttdef"><b>Definition:</b> <a href="stdafx_8h_source.html#l00133">stdafx.h:133</a></div></div>
<div class="ttc" id="classFinderData_html_a0058064a7d21263f086d94d3ab80c92c"><div class="ttname"><a href="classFinderData.html#a0058064a7d21263f086d94d3ab80c92c">FinderData::yvoxel</a></div><div class="ttdeci">uint16 yvoxel</div><div class="ttdoc">Y position of the voxel with the closest sprite. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00117">viewport.h:117</a></div></div>
<div class="ttc" id="window_8h_html_aab6fa040b57445f74c311c245079e741ac1a3ecc0e92154355d370c03f3c0d413"><div class="ttname"><a href="window_8h.html#aab6fa040b57445f74c311c245079e741ac1a3ecc0e92154355d370c03f3c0d413">CHG_UPDATE_BUTTONS</a></div><div class="ttdoc">Recompute the state of the buttons. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00063">window.h:63</a></div></div>
<div class="ttc" id="path_8h_html_ae093c9a96eda0463cdd2501ba83f10c3aed81a54dd317f604fe0c9180e8962372"><div class="ttname"><a href="path_8h.html#ae093c9a96eda0463cdd2501ba83f10c3aed81a54dd317f604fe0c9180e8962372">PAT_INVALID</a></div><div class="ttdoc">Invalid path type. </div><div class="ttdef"><b>Definition:</b> <a href="path_8h_source.html#l00111">path.h:111</a></div></div>
<div class="ttc" id="classPathBuildManager_html_ae93e0fb129d0f317527ee72f38707f2e"><div class="ttname"><a href="classPathBuildManager.html#ae93e0fb129d0f317527ee72f38707f2e">PathBuildManager::ConfirmLongPath</a></div><div class="ttdeci">void ConfirmLongPath()</div><div class="ttdoc">Confirm that the current long path is the selection to build. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00881">path_build.cpp:881</a></div></div>
<div class="ttc" id="classMouseModes_html_a017410b133ee48dfb89c1e3c89d9b382"><div class="ttname"><a href="classMouseModes.html#a017410b133ee48dfb89c1e3c89d9b382">MouseModes::SetViewportMousemode</a></div><div class="ttdeci">void SetViewportMousemode()</div><div class="ttdoc">Decide the most appropriate mouse mode of the viewport, depending on available windows. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01727">viewport.cpp:1727</a></div></div>
<div class="ttc" id="classPathBuildManager_html_a21f7e8365b9e13624748d9f8f6a334bd"><div class="ttname"><a href="classPathBuildManager.html#a21f7e8365b9e13624748d9f8f6a334bd">PathBuildManager::state</a></div><div class="ttdeci">PathBuildState state</div><div class="ttdoc">State of the path building process. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8h_source.html#l00068">path_build.h:68</a></div></div>
<div class="ttc" id="classPathBuildManager_html_a904959a3511725563fabd61bdb0b5e81"><div class="ttname"><a href="classPathBuildManager.html#a904959a3511725563fabd61bdb0b5e81">PathBuildManager::selected_slope</a></div><div class="ttdeci">TrackSlope selected_slope</div><div class="ttdoc">Last selected slope (TSL_INVALID if none has been chosen). </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8h_source.html#l00083">path_build.h:83</a></div></div>
<div class="ttc" id="path__build_8h_html"><div class="ttname"><a href="path__build_8h.html">path_build.h</a></div><div class="ttdoc">Path building manager declarations. </div></div>
<div class="ttc" id="group__map__group_html_gae1beaf14b9effb4a54e82830c7b36616"><div class="ttname"><a href="group__map__group.html#gae1beaf14b9effb4a54e82830c7b36616">_world</a></div><div class="ttdeci">VoxelWorld _world</div><div class="ttdoc">The game world. </div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00027">map.cpp:27</a></div></div>
<div class="ttc" id="classVoxelStack_html_a9bdf43776cc3c2598a454690ff4ce542"><div class="ttname"><a href="classVoxelStack.html#a9bdf43776cc3c2598a454690ff4ce542">VoxelStack::Get</a></div><div class="ttdeci">const Voxel * Get(int16 z) const </div><div class="ttdoc">Get a voxel in the world by voxel coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00216">map.cpp:216</a></div></div>
<div class="ttc" id="structVoxel_html_a3c0b954b6ea7b4d47dc31a5e3ffdce06"><div class="ttname"><a href="structVoxel.html#a3c0b954b6ea7b4d47dc31a5e3ffdce06">Voxel::IsEmpty</a></div><div class="ttdeci">bool IsEmpty() const </div><div class="ttdoc">Is the voxel empty? </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00276">map.h:276</a></div></div>
<div class="ttc" id="viewport_8h_html_a7eaf31dcf3c53b721a3144bb135f8d25abcab872146b299b3b600a3d351555f08"><div class="ttname"><a href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25abcab872146b299b3b600a3d351555f08">CS_PATH</a></div><div class="ttdoc">Path sprite. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00066">viewport.h:66</a></div></div>
<div class="ttc" id="viewport_8cpp_html_a168b8e1038efc200816524bab3092311"><div class="ttname"><a href="viewport_8cpp.html#a168b8e1038efc200816524bab3092311">GetViewport</a></div><div class="ttdeci">Viewport * GetViewport()</div><div class="ttdoc">Get the address of the viewport window. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01704">viewport.cpp:1704</a></div></div>
<div class="ttc" id="group__map__group_html_gaa25639f3980e1fa4c64a58d3a8e4d149"><div class="ttname"><a href="group__map__group.html#gaa25639f3980e1fa4c64a58d3a8e4d149">TileSlope</a></div><div class="ttdeci">TileSlope</div><div class="ttdoc">Slope description of a surface tile. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00054">tile.h:54</a></div></div>
<div class="ttc" id="classVoxelWorld_html_a813f4f0503efc085557fe4359e0ee520"><div class="ttname"><a href="classVoxelWorld.html#a813f4f0503efc085557fe4359e0ee520">VoxelWorld::GetStack</a></div><div class="ttdeci">const VoxelStack * GetStack(uint16 x, uint16 y) const </div><div class="ttdoc">Get a voxel stack (for read-only access). </div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00454">map.cpp:454</a></div></div>
<div class="ttc" id="classWindow_html_a28e5baa158219bb8485764c99239d211"><div class="ttname"><a href="classWindow.html#a28e5baa158219bb8485764c99239d211">Window::rect</a></div><div class="ttdeci">Rectangle32 rect</div><div class="ttdoc">Screen area covered by the window. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00123">window.h:123</a></div></div>
<div class="ttc" id="path__build_8cpp_html_ae7c6d68e033b0ad71ed538f11366c08b"><div class="ttname"><a href="path__build_8cpp.html#ae7c6d68e033b0ad71ed538f11366c08b">PathExistsAtBottomEdge</a></div><div class="ttdeci">bool PathExistsAtBottomEdge(int xpos, int ypos, int zpos, TileEdge edge)</div><div class="ttdoc">Does a path run at/to the bottom the given voxel in the neighbouring voxel? </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00093">path_build.cpp:93</a></div></div>
<div class="ttc" id="classPathBuildManager_html"><div class="ttname"><a href="classPathBuildManager.html">PathBuildManager</a></div><div class="ttdoc">Helper for storing data and state about the path building process. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8h_source.html#l00033">path_build.h:33</a></div></div>
<div class="ttc" id="structRectangle_html_aa81e161d1fdaa8801d202f59b4d541e0"><div class="ttname"><a href="structRectangle.html#aa81e161d1fdaa8801d202f59b4d541e0">Rectangle::height</a></div><div class="ttdeci">SZ height</div><div class="ttdoc">Height of the rectangle. </div><div class="ttdef"><b>Definition:</b> <a href="geometry_8h_source.html#l00249">geometry.h:249</a></div></div>
<div class="ttc" id="classPathBuildManager_html_a6e2f9b00f21bf3e5338fac6ad310a6a5"><div class="ttname"><a href="classPathBuildManager.html#a6e2f9b00f21bf3e5338fac6ad310a6a5">PathBuildManager::ylong</a></div><div class="ttdeci">uint16 ylong</div><div class="ttdoc">Y coordinate of the long path destination voxel. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8h_source.html#l00077">path_build.h:77</a></div></div>
<div class="ttc" id="classPathBuildManager_html_ac448d90e345460f8f1b13f7dc9562d38"><div class="ttname"><a href="classPathBuildManager.html#ac448d90e345460f8f1b13f7dc9562d38">PathBuildManager::ComputeNewLongPath</a></div><div class="ttdeci">void ComputeNewLongPath(const Point32 &amp;mousexy)</div><div class="ttdoc">Build a path from _path_builder xpos/ypos to the mouse cursor position. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00791">path_build.cpp:791</a></div></div>
<div class="ttc" id="stdafx_8h_html_a43d43196463bde49cb067f5c20ab8481"><div class="ttname"><a href="stdafx_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a></div><div class="ttdeci">signed int int32</div><div class="ttdoc">Signed 32 bit wide data type. </div><div class="ttdef"><b>Definition:</b> <a href="stdafx_8h_source.html#l00135">stdafx.h:135</a></div></div>
<div class="ttc" id="path__build_8h_html_ae93e3967177886e33c765ccd77463d22acf27848dfaa6c0ad0ec97a101672ccb7"><div class="ttname"><a href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22acf27848dfaa6c0ad0ec97a101672ccb7">PBS_LONG_BUY</a></div><div class="ttdoc">Wait for buying the long path. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8h_source.html#l00029">path_build.h:29</a></div></div>
<div class="ttc" id="stdafx_8h_html"><div class="ttname"><a href="stdafx_8h.html">stdafx.h</a></div><div class="ttdoc">Common type and macro definitions. </div></div>
<div class="ttc" id="group__map__group_html_ggabad48584a1852521ff578b647f07fdd3ae07f82bd43e8d66a7394d5ebf0f47c39"><div class="ttname"><a href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3ae07f82bd43e8d66a7394d5ebf0f47c39">VOR_SOUTH</a></div><div class="ttdoc">View with top of the world to the south. </div><div class="ttdef"><b>Definition:</b> <a href="orientation_8h_source.html#l00024">orientation.h:24</a></div></div>
<div class="ttc" id="classPathBuildManager_html_a2b9e1e703c6e677c585f7b1783e685c0"><div class="ttname"><a href="classPathBuildManager.html#a2b9e1e703c6e677c585f7b1783e685c0">PathBuildManager::xlong</a></div><div class="ttdeci">uint16 xlong</div><div class="ttdoc">X coordinate of the long path destination voxel. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8h_source.html#l00075">path_build.h:75</a></div></div>
<div class="ttc" id="classViewport_html_acf62487474e985c772ac2d98dd2e66b9"><div class="ttname"><a href="classViewport.html#acf62487474e985c772ac2d98dd2e66b9">Viewport::EnableWorldAdditions</a></div><div class="ttdeci">void EnableWorldAdditions()</div><div class="ttdoc">Enable flashing display of showing proposed game world additions to the player. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00391">viewport.cpp:391</a></div></div>
<div class="ttc" id="map_8h_html_ada9f0c1420f66f999469d82ef2262280aa21a61ab17228d4482507c9526547353"><div class="ttname"><a href="map_8h.html#ada9f0c1420f66f999469d82ef2262280aa21a61ab17228d4482507c9526547353">SRI_PATH</a></div><div class="ttdoc">Path. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00043">map.h:43</a></div></div>
<div class="ttc" id="map_8h_html_ad107e1bcd4b496ccf8b24ca7b68f4f68"><div class="ttname"><a href="map_8h.html#ad107e1bcd4b496ccf8b24ca7b68f4f68">IsVoxelstackInsideWorld</a></div><div class="ttdeci">static bool IsVoxelstackInsideWorld(int x, int y)</div><div class="ttdoc">Is the given world voxelstack coordinate within the world boundaries? </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00653">map.h:653</a></div></div>
<div class="ttc" id="map_8h_html_a6b4fc37deee61957b08c65de5cabf619"><div class="ttname"><a href="map_8h.html#a6b4fc37deee61957b08c65de5cabf619">WORLD_Z_SIZE</a></div><div class="ttdeci">static const int WORLD_Z_SIZE</div><div class="ttdoc">Maximal height of the world. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00027">map.h:27</a></div></div>
<div class="ttc" id="structVoxel_html"><div class="ttname"><a href="structVoxel.html">Voxel</a></div><div class="ttdoc">One voxel cell in the world. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00063">map.h:63</a></div></div>
<div class="ttc" id="classFinderData_html_a674e06effe0b2acbf5544b2f3e03dc51"><div class="ttname"><a href="classFinderData.html#a674e06effe0b2acbf5544b2f3e03dc51">FinderData::xvoxel</a></div><div class="ttdeci">uint16 xvoxel</div><div class="ttdoc">X position of the voxel with the closest sprite. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00116">viewport.h:116</a></div></div>
<div class="ttc" id="group__map__group_html_ga3622a3eda6865ce3e357b761e4f42dbdab04a104637f775750f8060270c1237c4"><div class="ttname"><a href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbdab04a104637f775750f8060270c1237c4">PATH_FLAT_COUNT</a></div><div class="ttdoc">Number of flat path sprites. </div><div class="ttdef"><b>Definition:</b> <a href="path_8h_source.html#l00077">path.h:77</a></div></div>
<div class="ttc" id="classViewport_html_ac2f43f9ca5af54296d614f1891597c0a"><div class="ttname"><a href="classViewport.html#ac2f43f9ca5af54296d614f1891597c0a">Viewport::ComputeCursorPosition</a></div><div class="ttdeci">ClickableSprite ComputeCursorPosition(FinderData *fdata)</div><div class="ttdoc">Compute position of the mouse cursor, and return the result. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01491">viewport.cpp:1491</a></div></div>
<div class="ttc" id="path__build_8cpp_html_ada755ad2e6f1ac3fe0b4ec8f9732359c"><div class="ttname"><a href="path__build_8cpp.html#ada755ad2e6f1ac3fe0b4ec8f9732359c">BuildFlatPath</a></div><div class="ttdeci">static bool BuildFlatPath(int16 xpos, int16 ypos, int8 zpos, PathType path_type, bool test_only)</div><div class="ttdoc">In the given voxel, can a flat path be build in the voxel? </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00165">path_build.cpp:165</a></div></div>
<div class="ttc" id="classPathBuildManager_html_a499bc0205c15f8ffcec9a9218cab34bb"><div class="ttname"><a href="classPathBuildManager.html#a499bc0205c15f8ffcec9a9218cab34bb">PathBuildManager::ypos</a></div><div class="ttdeci">uint16 ypos</div><div class="ttdoc">Y coordinate of the selected voxel. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8h_source.html#l00076">path_build.h:76</a></div></div>
<div class="ttc" id="group__map__group_html_ga29bb8f9503c34074bad3c762c92ee68b"><div class="ttname"><a href="group__map__group.html#ga29bb8f9503c34074bad3c762c92ee68b">TileEdge</a></div><div class="ttdeci">TileEdge</div><div class="ttdoc">Edges of a tile, starts at NE direction, and rotates clockwise. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00117">tile.h:117</a></div></div>
<div class="ttc" id="classPathBuildManager_html_aaa8165d0069112c9f9a3e62c9f04e5b5"><div class="ttname"><a href="classPathBuildManager.html#aaa8165d0069112c9f9a3e62c9f04e5b5">PathBuildManager::allowed_slopes</a></div><div class="ttdeci">uint8 allowed_slopes</div><div class="ttdoc">Allowed slope directions for the build direction. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8h_source.html#l00082">path_build.h:82</a></div></div>
<div class="ttc" id="path__build_8h_html_ae93e3967177886e33c765ccd77463d22a60bfba69d68df771f435ebb1f3752350"><div class="ttname"><a href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22a60bfba69d68df771f435ebb1f3752350">PBS_LONG_BUILD</a></div><div class="ttdoc">Build a &#39;long&#39; path. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8h_source.html#l00028">path_build.h:28</a></div></div>
<div class="ttc" id="viewport_8h_html_ac72850d8ae4e0c914f4227f845921a3fad24e8cba4715caaeff18503ab60b8da9"><div class="ttname"><a href="viewport_8h.html#ac72850d8ae4e0c914f4227f845921a3fad24e8cba4715caaeff18503ab60b8da9">FW_TILE</a></div><div class="ttdoc">Find whole tile only. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00102">viewport.h:102</a></div></div>
<div class="ttc" id="map_8h_html_ada9f0c1420f66f999469d82ef2262280ac9a76026403b7122a5b727d52ae64a3a"><div class="ttname"><a href="map_8h.html#ada9f0c1420f66f999469d82ef2262280ac9a76026403b7122a5b727d52ae64a3a">SRI_FREE</a></div><div class="ttdoc">Ride instance is not used. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00037">map.h:37</a></div></div>
<div class="ttc" id="classVoxelStack_html"><div class="ttname"><a href="classVoxelStack.html">VoxelStack</a></div><div class="ttdoc">One column of voxels. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00462">map.h:462</a></div></div>
<div class="ttc" id="viewport_8cpp_html_a5801ceed6ab2a98de5e940a6044e43dd"><div class="ttname"><a href="viewport_8cpp.html#a5801ceed6ab2a98de5e940a6044e43dd">_mouse_modes</a></div><div class="ttdeci">MouseModes _mouse_modes</div><div class="ttdoc">Mouse modes in the game. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00096">viewport.cpp:96</a></div></div>
<div class="ttc" id="viewport_8h_html_a7eaf31dcf3c53b721a3144bb135f8d25ad9f72db2c1d806e711ad1b28d8e54525"><div class="ttname"><a href="viewport_8h.html#a7eaf31dcf3c53b721a3144bb135f8d25ad9f72db2c1d806e711ad1b28d8e54525">CS_NONE</a></div><div class="ttdoc">No valid sprite. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00063">viewport.h:63</a></div></div>
<div class="ttc" id="classVoxelWorld_html_a5bc499626f6ca0544683535d36b5917a"><div class="ttname"><a href="classVoxelWorld.html#a5bc499626f6ca0544683535d36b5917a">VoxelWorld::GetXSize</a></div><div class="ttdeci">uint16 GetXSize() const </div><div class="ttdoc">Get X size of the world. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00542">map.h:542</a></div></div>
<div class="ttc" id="path_8cpp_html_a25e306a50253b7bcb376da3b8b10b3fc"><div class="ttname"><a href="path_8cpp.html#a25e306a50253b7bcb376da3b8b10b3fc">_path_down_from_edge</a></div><div class="ttdeci">const PathSprites _path_down_from_edge[EDGE_COUNT]</div><div class="ttdoc">Imploded path tile sprite number to use for an &#39;down&#39; slope from a given edge. </div><div class="ttdef"><b>Definition:</b> <a href="path_8cpp_source.html#l00026">path.cpp:26</a></div></div>
<div class="ttc" id="classPathBuildManager_html_a5e70b4b0a613bbbea7e925c2bb397114"><div class="ttname"><a href="classPathBuildManager.html#a5e70b4b0a613bbbea7e925c2bb397114">PathBuildManager::ComputeWorldAdditions</a></div><div class="ttdeci">void ComputeWorldAdditions()</div><div class="ttdoc">Compute the new contents of the voxel where the path should be added from the _world. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00607">path_build.cpp:607</a></div></div>
<div class="ttc" id="classPathBuildManager_html_a511cacf7d108d5700d4ac00b24d5b5c5"><div class="ttname"><a href="classPathBuildManager.html#a511cacf7d108d5700d4ac00b24d5b5c5">PathBuildManager::MoveCursor</a></div><div class="ttdeci">void MoveCursor(TileEdge edge, bool move_up)</div><div class="ttdoc">Try to move the tile cursor to a new tile. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00494">path_build.cpp:494</a></div></div>
<div class="ttc" id="sprite__store_8cpp_html_aceecbbda4fed58053329eced561b20fa"><div class="ttname"><a href="sprite__store_8cpp.html#aceecbbda4fed58053329eced561b20fa">_sprite_manager</a></div><div class="ttdeci">SpriteManager _sprite_manager</div><div class="ttdoc">Sprite manager. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8cpp_source.html#l00031">sprite_store.cpp:31</a></div></div>
<div class="ttc" id="classPathBuildManager_html_ad67154be3a0d8a253780d4a1a73640a8"><div class="ttname"><a href="classPathBuildManager.html#ad67154be3a0d8a253780d4a1a73640a8">PathBuildManager::xpos</a></div><div class="ttdeci">uint16 xpos</div><div class="ttdoc">X coordinate of the selected voxel. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8h_source.html#l00074">path_build.h:74</a></div></div>
<div class="ttc" id="group__map__group_html_gga17a68962aecf6bf22a97d7e78da6fcfbaa5de6e54f01653b72c99a96aec13d1eb"><div class="ttname"><a href="group__map__group.html#gga17a68962aecf6bf22a97d7e78da6fcfbaa5de6e54f01653b72c99a96aec13d1eb">FDT_INVALID</a></div><div class="ttdoc">Invalid foundation type. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00211">tile.h:211</a></div></div>
<div class="ttc" id="path__build_8cpp_html_acc1f7855216a6d1116274edf0357e010"><div class="ttname"><a href="path__build_8cpp.html#acc1f7855216a6d1116274edf0357e010">BuildUpwardPath</a></div><div class="ttdeci">static bool BuildUpwardPath(int16 xpos, int16 ypos, int8 zpos, TileEdge edge, PathType path_type, bool test_only)</div><div class="ttdoc">In the given voxel, can an upward path be build in the voxel from the bottom at the given edge...</div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00122">path_build.cpp:122</a></div></div>
<div class="ttc" id="classFinderData_html_ad42b1b2e05e45729a9a506ed49f40e36"><div class="ttname"><a href="classFinderData.html#ad42b1b2e05e45729a9a506ed49f40e36">FinderData::cursor</a></div><div class="ttdeci">CursorType cursor</div><div class="ttdoc">Type of cursor suggested. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00115">viewport.h:115</a></div></div>
<div class="ttc" id="classPathBuildManager_html_a18eb61e44f231153761d42fc8bc9bf50"><div class="ttname"><a href="classPathBuildManager.html#a18eb61e44f231153761d42fc8bc9bf50">PathBuildManager::path_type</a></div><div class="ttdeci">PathType path_type</div><div class="ttdoc">Selected type of path to use for building. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8h_source.html#l00069">path_build.h:69</a></div></div>
<div class="ttc" id="window_8cpp_html_a4e83041d9bb7c20fe3f7e8e389b2b416"><div class="ttname"><a href="window_8cpp.html#a4e83041d9bb7c20fe3f7e8e389b2b416">NotifyChange</a></div><div class="ttdeci">void NotifyChange(WindowTypes wtype, WindowNumber wnumber, ChangeCode code, uint32 parameter)</div><div class="ttdoc">Notify the window of the given type of the change with the specified number. </div><div class="ttdef"><b>Definition:</b> <a href="window_8cpp_source.html#l01043">window.cpp:1043</a></div></div>
<div class="ttc" id="classPathBuildManager_html_ab15ebcdf7d0590edd4a6612029e256ad"><div class="ttname"><a href="classPathBuildManager.html#ab15ebcdf7d0590edd4a6612029e256ad">PathBuildManager::ActivateMode</a></div><div class="ttdeci">void ActivateMode(const Point16 &amp;pos) override</div><div class="ttdoc">Restart the path build interaction sequence. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00376">path_build.cpp:376</a></div></div>
<div class="ttc" id="group__map__group_html_gga3c6755713f12385e83e096c36b8e84e8ac181b67e97c9b84e3b7e1907875d3b74"><div class="ttname"><a href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8ac181b67e97c9b84e3b7e1907875d3b74">TSL_FLAT</a></div><div class="ttdoc">Horizontal slope. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00221">tile.h:221</a></div></div>
<div class="ttc" id="structVoxel_html_affbc45e0be9940baf856c2ea9377b182"><div class="ttname"><a href="structVoxel.html#affbc45e0be9940baf856c2ea9377b182">Voxel::GetInstanceData</a></div><div class="ttdeci">uint16 GetInstanceData() const </div><div class="ttdoc">Get the data associated with the ride instance in this voxel. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00105">map.h:105</a></div></div>
<div class="ttc" id="stdafx_8h_html_adde6aaee8457bee49c2a92621fe22b79"><div class="ttname"><a href="stdafx_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a></div><div class="ttdeci">unsigned char uint8</div><div class="ttdoc">Unsigned 8 bit wide data type. </div><div class="ttdef"><b>Definition:</b> <a href="stdafx_8h_source.html#l00130">stdafx.h:130</a></div></div>
<div class="ttc" id="path__build_8h_html_ae93e3967177886e33c765ccd77463d22ac8fdc2028b02ce632bd6e6ed6d68bb4e"><div class="ttname"><a href="path__build_8h.html#ae93e3967177886e33c765ccd77463d22ac8fdc2028b02ce632bd6e6ed6d68bb4e">PBS_WAIT_ARROW</a></div><div class="ttdoc">Wait for an arrow direction to be selected. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8h_source.html#l00025">path_build.h:25</a></div></div>
<div class="ttc" id="group__map__group_html_gga3c6755713f12385e83e096c36b8e84e8a3b570fae374b633396682ca7358f288b"><div class="ttname"><a href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a3b570fae374b633396682ca7358f288b">TSL_DOWN</a></div><div class="ttdoc">Gently down. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00220">tile.h:220</a></div></div>
<div class="ttc" id="structVoxel_html_a39b4316f246f89cc83a490c87edd7ac6"><div class="ttname"><a href="structVoxel.html#a39b4316f246f89cc83a490c87edd7ac6">Voxel::GetGroundType</a></div><div class="ttdeci">GroundType GetGroundType() const </div><div class="ttdoc">Get the ground type of a surface voxel. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00224">map.h:224</a></div></div>
<div class="ttc" id="path__build_8cpp_html_a1511109f2a08c1b6b44fca63f9d35575"><div class="ttname"><a href="path__build_8cpp.html#a1511109f2a08c1b6b44fca63f9d35575">GetPathAttachPoints</a></div><div class="ttdeci">static uint8 GetPathAttachPoints(int16 xpos, int16 ypos, int8 zpos)</div><div class="ttdoc">Compute the attach points of a path in a voxel. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00315">path_build.cpp:315</a></div></div>
<div class="ttc" id="group__map__group_html_gga29bb8f9503c34074bad3c762c92ee68ba9113f1260923c7d73750d0ef8c45b659"><div class="ttname"><a href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba9113f1260923c7d73750d0ef8c45b659">EDGE_BEGIN</a></div><div class="ttdoc">First valid edge. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00118">tile.h:118</a></div></div>
<div class="ttc" id="group__map__group_html_gga29bb8f9503c34074bad3c762c92ee68ba91a648042eb156a3d0d9538907ce1242"><div class="ttname"><a href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba91a648042eb156a3d0d9538907ce1242">EDGE_NE</a></div><div class="ttdoc">North-east edge. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00119">tile.h:119</a></div></div>
<div class="ttc" id="classWorldAdditions_html_a75b7c8f73ddd6d0024e2b9a26eda0872"><div class="ttname"><a href="classWorldAdditions.html#a75b7c8f73ddd6d0024e2b9a26eda0872">WorldAdditions::Clear</a></div><div class="ttdeci">void Clear()</div><div class="ttdoc">Remove all modifications. </div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00651">map.cpp:651</a></div></div>
<div class="ttc" id="classPathBuildManager_html_a981f5f01bd96e99df6c804230d3790a5"><div class="ttname"><a href="classPathBuildManager.html#a981f5f01bd96e99df6c804230d3790a5">PathBuildManager::SelectLong</a></div><div class="ttdeci">void SelectLong()</div><div class="ttdoc">Enter long path building mode. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00755">path_build.cpp:755</a></div></div>
<div class="ttc" id="classPathBuildManager_html_a86bd70f92b15566b977f3599182a4710"><div class="ttname"><a href="classPathBuildManager.html#a86bd70f92b15566b977f3599182a4710">PathBuildManager::SelectArrow</a></div><div class="ttdeci">void SelectArrow(TileEdge direction)</div><div class="ttdoc">User selected a build direction. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00467">path_build.cpp:467</a></div></div>
<div class="ttc" id="classGameModeManager_html_a2dc1b008ba3c9e96c14b98db5ff2e2fe"><div class="ttname"><a href="classGameModeManager.html#a2dc1b008ba3c9e96c14b98db5ff2e2fe">GameModeManager::InPlayMode</a></div><div class="ttdeci">bool InPlayMode() const </div><div class="ttdoc">Checks if the current game mode is GM_PLAY. </div><div class="ttdef"><b>Definition:</b> <a href="gamemode_8h_source.html#l00054">gamemode.h:54</a></div></div>
<div class="ttc" id="structVoxel_html_ac6a9570002471456b113fe1d78416cef"><div class="ttname"><a href="structVoxel.html#ac6a9570002471456b113fe1d78416cef">Voxel::ClearVoxel</a></div><div class="ttdeci">void ClearVoxel()</div><div class="ttdoc">Make the voxel empty. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00282">map.h:282</a></div></div>
<div class="ttc" id="classViewport_html_ae7e716461b7573afdde9171b2303ce15"><div class="ttname"><a href="classViewport.html#ae7e716461b7573afdde9171b2303ce15">Viewport::tile_cursor</a></div><div class="ttdeci">Cursor tile_cursor</div><div class="ttdoc">Cursor for selecting a tile (or tile corner). </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00256">viewport.h:256</a></div></div>
<div class="ttc" id="group__viewport__group_html_gabbe637356c8cb749a9726f13658031fa"><div class="ttname"><a href="group__viewport__group.html#gabbe637356c8cb749a9726f13658031fa">CursorType</a></div><div class="ttdeci">CursorType</div><div class="ttdoc">Available cursor types. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00041">viewport.h:41</a></div></div>
<div class="ttc" id="classSpriteManager_html_a4d602ccbc1f1e04f23e5a8f2602953d8"><div class="ttname"><a href="classSpriteManager.html#a4d602ccbc1f1e04f23e5a8f2602953d8">SpriteManager::GetPathStatus</a></div><div class="ttdeci">PathStatus GetPathStatus(PathType path_type)</div><div class="ttdoc">Get the status of a path type. </div><div class="ttdef"><b>Definition:</b> <a href="sprite__store_8cpp_source.html#l01603">sprite_store.cpp:1603</a></div></div>
<div class="ttc" id="classVoxelWorld_html_aa6c9196b8ab77fea05827e90979f6fa2"><div class="ttname"><a href="classVoxelWorld.html#aa6c9196b8ab77fea05827e90979f6fa2">VoxelWorld::GetTileOwner</a></div><div class="ttdeci">TileOwner GetTileOwner(uint16 x, uint16 y)</div><div class="ttdoc">Get the ownership of a tile. </div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00482">map.cpp:482</a></div></div>
<div class="ttc" id="structVoxel_html_aa827aa42d8c618d7e68a826494e19c7a"><div class="ttname"><a href="structVoxel.html#aa827aa42d8c618d7e68a826494e19c7a">Voxel::GetFoundationType</a></div><div class="ttdeci">FoundationType GetFoundationType() const </div><div class="ttdoc">Get the foundation type of a surface voxel. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00183">map.h:183</a></div></div>
<div class="ttc" id="classPathBuildManager_html_abc3796d66911f075f4fc7cc5d2e946d8"><div class="ttname"><a href="classPathBuildManager.html#abc3796d66911f075f4fc7cc5d2e946d8">PathBuildManager::PathBuildManager</a></div><div class="ttdeci">PathBuildManager()</div><div class="ttdoc">Default constructor. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00357">path_build.cpp:357</a></div></div>
<div class="ttc" id="path__build_8cpp_html_a88d678936d17fb1f338bd24a25935523"><div class="ttname"><a href="path__build_8cpp.html#a88d678936d17fb1f338bd24a25935523">CanBuildPathFromEdge</a></div><div class="ttdeci">static uint8 CanBuildPathFromEdge(int16 xpos, int16 ypos, int8 zpos, TileEdge edge)</div><div class="ttdoc">In the given voxel, can a path be build in the voxel from the bottom at the given edge...</div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00278">path_build.cpp:278</a></div></div>
<div class="ttc" id="gamemode_8h_html"><div class="ttname"><a href="gamemode_8h.html">gamemode.h</a></div><div class="ttdoc">Game modes. </div></div>
<div class="ttc" id="classVoxelWorld_html_a4b99ca56b6b030033263b1397b2bdc41"><div class="ttname"><a href="classVoxelWorld.html#a4b99ca56b6b030033263b1397b2bdc41">VoxelWorld::GetYSize</a></div><div class="ttdeci">uint16 GetYSize() const </div><div class="ttdoc">Get Y size of the world. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00551">map.h:551</a></div></div>
<div class="ttc" id="path_8cpp_html_a0ad66bab121db574823457f41b81d843"><div class="ttname"><a href="path_8cpp.html#a0ad66bab121db574823457f41b81d843">AddRemovePathEdges</a></div><div class="ttdeci">uint8 AddRemovePathEdges(uint16 xpos, uint16 ypos, uint8 zpos, uint8 slope, uint8 dirs, bool use_additions, PathStatus status)</div><div class="ttdoc">Add edges of the neighbouring path tiles. </div><div class="ttdef"><b>Definition:</b> <a href="path_8cpp_source.html#l00460">path.cpp:460</a></div></div>
<div class="ttc" id="group__map__group_html_gga29bb8f9503c34074bad3c762c92ee68bad242fafb31c89544eebffc371fcc07d5"><div class="ttname"><a href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68bad242fafb31c89544eebffc371fcc07d5">EDGE_SE</a></div><div class="ttdoc">South-east edge. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00120">tile.h:120</a></div></div>
<div class="ttc" id="classVoxelStack_html_ae19e5238e09f57f4ea10029e93062d62"><div class="ttname"><a href="classVoxelStack.html#ae19e5238e09f57f4ea10029e93062d62">VoxelStack::GetCreate</a></div><div class="ttdeci">Voxel * GetCreate(int16 z, bool create)</div><div class="ttdoc">Get a voxel in the world by voxel coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00234">map.cpp:234</a></div></div>
<div class="ttc" id="path_8h_html_ab63ae68a86342b2888c58c113d3a255ca5ce0202df5b1569221dffd3aa4d24283"><div class="ttname"><a href="path_8h.html#ab63ae68a86342b2888c58c113d3a255ca5ce0202df5b1569221dffd3aa4d24283">PAS_UNUSED</a></div><div class="ttdoc">Path is not loaded. </div><div class="ttdef"><b>Definition:</b> <a href="path_8h_source.html#l00116">path.h:116</a></div></div>
<div class="ttc" id="classPathBuildManager_html_a84e4d6aea7da83768a8f9ae4f3d7be63"><div class="ttname"><a href="classPathBuildManager.html#a84e4d6aea7da83768a8f9ae4f3d7be63">PathBuildManager::UpdateState</a></div><div class="ttdeci">void UpdateState()</div><div class="ttdoc">Update the state of the path build process. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00637">path_build.cpp:637</a></div></div>
<div class="ttc" id="classViewport_html"><div class="ttname"><a href="classViewport.html">Viewport</a></div><div class="ttdoc">Class for displaying parts of the world. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00226">viewport.h:226</a></div></div>
<div class="ttc" id="structVoxel_html_a78ee7c8c8e8e62d18733aed8c28cba56"><div class="ttname"><a href="structVoxel.html#a78ee7c8c8e8e62d18733aed8c28cba56">Voxel::GetInstance</a></div><div class="ttdeci">SmallRideInstance GetInstance() const </div><div class="ttdoc">Get the ride instance at this voxel. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00072">map.h:72</a></div></div>
<div class="ttc" id="map_8h_html"><div class="ttname"><a href="map_8h.html">map.h</a></div><div class="ttdoc">Definition of voxels in the world. </div></div>
<div class="ttc" id="classPathBuildManager_html_abea15235f9ad53553faf1efda14da77e"><div class="ttname"><a href="classPathBuildManager.html#abea15235f9ad53553faf1efda14da77e">PathBuildManager::zlong</a></div><div class="ttdeci">uint8 zlong</div><div class="ttdoc">Z coordinate of the long path destination voxel. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8h_source.html#l00079">path_build.h:79</a></div></div>
<div class="ttc" id="structPoint_html"><div class="ttname"><a href="structPoint.html">Point&lt; int16 &gt;</a></div></div>
<div class="ttc" id="classPathBuildManager_html_a1400d7e4959491334e1db90d2291600a"><div class="ttname"><a href="classPathBuildManager.html#a1400d7e4959491334e1db90d2291600a">PathBuildManager::OnMouseButtonEvent</a></div><div class="ttdeci">void OnMouseButtonEvent(Viewport *vp, uint8 state) override</div><div class="ttdoc">A mouse click was detected. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00415">path_build.cpp:415</a></div></div>
<div class="ttc" id="classPathBuildManager_html_a782d636cc1ebe6b084c9f3c5fee90163"><div class="ttname"><a href="classPathBuildManager.html#a782d636cc1ebe6b084c9f3c5fee90163">PathBuildManager::OnMouseMoveEvent</a></div><div class="ttdeci">void OnMouseMoveEvent(Viewport *vp, const Point16 &amp;old_pos, const Point16 &amp;pos) override</div><div class="ttdoc">The mouse moved while in this mouse mode. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00397">path_build.cpp:397</a></div></div>
<div class="ttc" id="group__map__group_html_gga29bb8f9503c34074bad3c762c92ee68babd24d9c7b6e650be2bbe82b73f66cdea"><div class="ttname"><a href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68babd24d9c7b6e650be2bbe82b73f66cdea">EDGE_COUNT</a></div><div class="ttdoc">Number of edges. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00124">tile.h:124</a></div></div>
<div class="ttc" id="group__window__group_html_ggade7253f2c8330e54217bfab0f26c09e0a8cbfa61d45819b21829c12c4f92acdf4"><div class="ttname"><a href="group__window__group.html#ggade7253f2c8330e54217bfab0f26c09e0a8cbfa61d45819b21829c12c4f92acdf4">MB_CURRENT</a></div><div class="ttdoc">Bitmask for current mouse state. </div><div class="ttdef"><b>Definition:</b> <a href="window_8h_source.html#l00085">window.h:85</a></div></div>
<div class="ttc" id="classViewport_html_a6587519ef53f480df211762c2d2c8ed6"><div class="ttname"><a href="classViewport.html#a6587519ef53f480df211762c2d2c8ed6">Viewport::EnsureAdditionsAreVisible</a></div><div class="ttdeci">void EnsureAdditionsAreVisible()</div><div class="ttdoc">Reset the display state of the world additions, such that they become visible directly. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l00418">viewport.cpp:418</a></div></div>
<div class="ttc" id="tile_8h_html_a9e972149bbb18515cf3a69ee0d5b80ea"><div class="ttname"><a href="tile_8h.html#a9e972149bbb18515cf3a69ee0d5b80ea">IsImplodedSteepSlope</a></div><div class="ttdeci">static bool IsImplodedSteepSlope(uint8 ts)</div><div class="ttdoc">Does the imploded tile slope represent a steep slope? </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00137">tile.h:137</a></div></div>
<div class="ttc" id="group__map__group_html_gga3c6755713f12385e83e096c36b8e84e8a4eb1a75894e59e230a15fe54125d779c"><div class="ttname"><a href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a4eb1a75894e59e230a15fe54125d779c">TSL_UP</a></div><div class="ttdoc">Gently up. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00222">tile.h:222</a></div></div>
<div class="ttc" id="classViewport_html_a51aea10995fec2c7d0c2a9b8202e2fdb"><div class="ttname"><a href="classViewport.html#a51aea10995fec2c7d0c2a9b8202e2fdb">Viewport::arrow_cursor</a></div><div class="ttdeci">Cursor arrow_cursor</div><div class="ttdoc">Cursor for showing the path/track build direction. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00257">viewport.h:257</a></div></div>
<div class="ttc" id="group__map__group_html_gga3c6755713f12385e83e096c36b8e84e8a2a923a4a698029baf0a27bba9a667242"><div class="ttname"><a href="group__map__group.html#gga3c6755713f12385e83e096c36b8e84e8a2a923a4a698029baf0a27bba9a667242">TSL_INVALID</a></div><div class="ttdoc">Invalid track slope. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00233">tile.h:233</a></div></div>
<div class="ttc" id="group__map__group_html_ggaa25639f3980e1fa4c64a58d3a8e4d149a64eb675ab6505f4cab2b51475aad7ddb"><div class="ttname"><a href="group__map__group.html#ggaa25639f3980e1fa4c64a58d3a8e4d149a64eb675ab6505f4cab2b51475aad7ddb">TSB_STEEP</a></div><div class="ttdoc">Bit denoting it is a steep slope. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00069">tile.h:69</a></div></div>
<div class="ttc" id="classPathBuildManager_html_a01f03c9ce8d0ac2ce60687d8fd7953fa"><div class="ttname"><a href="classPathBuildManager.html#a01f03c9ce8d0ac2ce60687d8fd7953fa">PathBuildManager::selected_arrow</a></div><div class="ttdeci">TileEdge selected_arrow</div><div class="ttdoc">Last selected build direction (INVALID_EDGE if none has been chosen). </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8h_source.html#l00081">path_build.h:81</a></div></div>
<div class="ttc" id="group__viewport__group_html_gga1e53aab612718f53f9838d49f13be786a65a6e493817410a7721b36c2fe19defc"><div class="ttname"><a href="group__viewport__group.html#gga1e53aab612718f53f9838d49f13be786a65a6e493817410a7721b36c2fe19defc">MM_PATH_BUILDING</a></div><div class="ttdoc">Construct paths. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00029">viewport.h:29</a></div></div>
<div class="ttc" id="group__map__group_html_gga29bb8f9503c34074bad3c762c92ee68ba2ccac72ccffe9c7e939bed03787d1c96"><div class="ttname"><a href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba2ccac72ccffe9c7e939bed03787d1c96">INVALID_EDGE</a></div><div class="ttdoc">Invalid edge (to denote lack of an edge). </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00128">tile.h:128</a></div></div>
<div class="ttc" id="classPathBuildManager_html_a813e8023b124f8c3f298c0ed414f7078"><div class="ttname"><a href="classPathBuildManager.html#a813e8023b124f8c3f298c0ed414f7078">PathBuildManager::SelectBuyRemove</a></div><div class="ttdeci">void SelectBuyRemove(bool buy)</div><div class="ttdoc">User selected &#39;buy&#39; or &#39;remove&#39;. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00892">path_build.cpp:892</a></div></div>
<div class="ttc" id="structPoint_html_a56c3dcea91f03182921eea9a5cf555a3"><div class="ttname"><a href="structPoint.html#a56c3dcea91f03182921eea9a5cf555a3">Point::y</a></div><div class="ttdeci">CT y</div><div class="ttdoc">Y coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="geometry_8h_source.html#l00038">geometry.h:38</a></div></div>
<div class="ttc" id="classPathBuildManager_html_a00a51f2cb970348e60736e8d523ab5f0"><div class="ttname"><a href="classPathBuildManager.html#a00a51f2cb970348e60736e8d523ab5f0">PathBuildManager::ComputeArrowCursorPosition</a></div><div class="ttdeci">void ComputeArrowCursorPosition(uint16 *xpos, uint16 *ypos, uint8 *zpos)</div><div class="ttdoc">Compute the voxel to display the arrow cursor. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00584">path_build.cpp:584</a></div></div>
<div class="ttc" id="group__map__group_html_gga29bb8f9503c34074bad3c762c92ee68baa49ed1ec0f987e5a1d8a9196ff848658"><div class="ttname"><a href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68baa49ed1ec0f987e5a1d8a9196ff848658">EDGE_SW</a></div><div class="ttdoc">South-west edge. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00121">tile.h:121</a></div></div>
<div class="ttc" id="stdafx_8h_html_a6c2edf1e500e498b687567418bf4fef6"><div class="ttname"><a href="stdafx_8h.html#a6c2edf1e500e498b687567418bf4fef6">NOT_REACHED</a></div><div class="ttdeci">#define NOT_REACHED()</div><div class="ttdoc">Macro for reporting reaching an &#39;impossible&#39; position in the code. </div><div class="ttdef"><b>Definition:</b> <a href="stdafx_8h_source.html#l00182">stdafx.h:182</a></div></div>
<div class="ttc" id="group__map__group_html_ga3622a3eda6865ce3e357b761e4f42dbd"><div class="ttname"><a href="group__map__group.html#ga3622a3eda6865ce3e357b761e4f42dbd">PathSprites</a></div><div class="ttdeci">PathSprites</div><div class="ttdoc">Available path sprites. </div><div class="ttdef"><b>Definition:</b> <a href="path_8h_source.html#l00029">path.h:29</a></div></div>
<div class="ttc" id="tile_8h_html_aab8ddb59473b78057c550ca54ac16a5a"><div class="ttname"><a href="tile_8h.html#aab8ddb59473b78057c550ca54ac16a5a">_tile_dxy</a></div><div class="ttdeci">const Point16 _tile_dxy[EDGE_COUNT]</div><div class="ttdoc">Tile dx/dy of the tile connected to the given edge. </div><div class="ttdef"><b>Definition:</b> <a href="tile__func_8cpp_source.html#l00032">tile_func.cpp:32</a></div></div>
<div class="ttc" id="classViewport_html_aba252f1b77ad16f08f7d828de99c16b1"><div class="ttname"><a href="classViewport.html#aba252f1b77ad16f08f7d828de99c16b1">Viewport::MoveViewport</a></div><div class="ttdeci">void MoveViewport(int dx, int dy)</div><div class="ttdoc">Move the viewport a number of screen pixels. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8cpp_source.html#l01585">viewport.cpp:1585</a></div></div>
<div class="ttc" id="group__map__group_html_gga29bb8f9503c34074bad3c762c92ee68ba9aeba05ca411e9e289f346e9593b9970"><div class="ttname"><a href="group__map__group.html#gga29bb8f9503c34074bad3c762c92ee68ba9aeba05ca411e9e289f346e9593b9970">EDGE_ALL</a></div><div class="ttdoc">Bit set of all edges. </div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00126">tile.h:126</a></div></div>
<div class="ttc" id="group__viewport__group_html_ggabbe637356c8cb749a9726f13658031faa5e75ae003f5020916655bd0bf0248c4a"><div class="ttname"><a href="group__viewport__group.html#ggabbe637356c8cb749a9726f13658031faa5e75ae003f5020916655bd0bf0248c4a">CUR_TYPE_ARROW_NE</a></div><div class="ttdoc">Show a build arrow in the NE direction. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00047">viewport.h:47</a></div></div>
<div class="ttc" id="classPathBuildManager_html_abc6d1a79dd78b8c01f50f94a0623eb22"><div class="ttname"><a href="classPathBuildManager.html#abc6d1a79dd78b8c01f50f94a0623eb22">PathBuildManager::allowed_arrows</a></div><div class="ttdeci">uint8 allowed_arrows</div><div class="ttdoc">Allowed build directions from the voxel (bitset of TileEdge, lower 4 bits are at bottom, upper 4 bits at top). </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8h_source.html#l00080">path_build.h:80</a></div></div>
<div class="ttc" id="structPoint_html_af0836c7f2eec563aa7bc20d8cfa5dd2a"><div class="ttname"><a href="structPoint.html#af0836c7f2eec563aa7bc20d8cfa5dd2a">Point::x</a></div><div class="ttdeci">CT x</div><div class="ttdoc">X coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="geometry_8h_source.html#l00037">geometry.h:37</a></div></div>
<div class="ttc" id="stdafx_8h_html_a1b956fe1df85f3c132b21edb4e116458"><div class="ttname"><a href="stdafx_8h.html#a1b956fe1df85f3c132b21edb4e116458">int8</a></div><div class="ttdeci">signed char int8</div><div class="ttdoc">Signed 8 bit wide data type. </div><div class="ttdef"><b>Definition:</b> <a href="stdafx_8h_source.html#l00131">stdafx.h:131</a></div></div>
<div class="ttc" id="classWorldAdditions_html_af9c74f1e4bf6e311c5c9d2e448e8eebd"><div class="ttname"><a href="classWorldAdditions.html#af9c74f1e4bf6e311c5c9d2e448e8eebd">WorldAdditions::Commit</a></div><div class="ttdeci">void Commit()</div><div class="ttdoc">Move modifications to the &#39;real&#39; _world. </div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00660">map.cpp:660</a></div></div>
<div class="ttc" id="map_8h_html_a3eb46b16632a09b0b18530aca51dcfe3a9e25c348e5b9bb47b1357ea1fef3bfc1"><div class="ttname"><a href="map_8h.html#a3eb46b16632a09b0b18530aca51dcfe3a9e25c348e5b9bb47b1357ea1fef3bfc1">OWN_PARK</a></div><div class="ttdoc">Tile owned by the park. </div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00453">map.h:453</a></div></div>
<div class="ttc" id="classPathBuildManager_html_a44675b0e08cf9c268dc0cce33c299470"><div class="ttname"><a href="classPathBuildManager.html#a44675b0e08cf9c268dc0cce33c299470">PathBuildManager::EnableCursors</a></div><div class="ttdeci">bool EnableCursors() override</div><div class="ttdoc">Control display of cursors in the mouse mode. </div><div class="ttdef"><b>Definition:</b> <a href="path__build_8cpp_source.html#l00392">path_build.cpp:392</a></div></div>
<div class="ttc" id="classFinderData_html_a336773fc5b4847f5b0f47710ffd61885"><div class="ttname"><a href="classFinderData.html#a336773fc5b4847f5b0f47710ffd61885">FinderData::zvoxel</a></div><div class="ttdeci">uint8 zvoxel</div><div class="ttdoc">Z position of the voxel with the closest sprite. </div><div class="ttdef"><b>Definition:</b> <a href="viewport_8h_source.html#l00118">viewport.h:118</a></div></div>
<div class="ttc" id="group__map__group_html_ggabad48584a1852521ff578b647f07fdd3ab9f340d6a90130e2bcc75d5be2af447e"><div class="ttname"><a href="group__map__group.html#ggabad48584a1852521ff578b647f07fdd3ab9f340d6a90130e2bcc75d5be2af447e">VOR_EAST</a></div><div class="ttdoc">View with top of the world to the east. </div><div class="ttdef"><b>Definition:</b> <a href="orientation_8h_source.html#l00023">orientation.h:23</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Sep 5 2014 19:06:12 for FreeRCT by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
